{"remainingRequest":"/Users/jonny/Desktop/myProjects/Kalaam-core/FE/node_modules/babel-loader/lib/index.js!/Users/jonny/Desktop/myProjects/Kalaam-core/Scripts/main.js","dependencies":[{"path":"/Users/jonny/Desktop/myProjects/Kalaam-core/Scripts/main.js","mtime":1620343647683},{"path":"/Users/jonny/Desktop/myProjects/Kalaam-core/FE/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jonny/Desktop/myProjects/Kalaam-core/FE/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmRleC1vZiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4iOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5kYXRlLnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucGFyc2UtaW50IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKaW1wb3J0IHsgU291cmNlRGF0YVJlcGxhY2Vmb3JFYXN5UGFyc2luZyB9IGZyb20gJy4uL1NjcmlwdHMvRGF0YUNsZWFuaW5nJzsKaW1wb3J0IHsgQWN0aXZlTGFuZ3VnYWVLZXl3b3JkcyB9IGZyb20gJy4uL0NvbXBpbGVyL2NvbnN0YW50cyc7CmltcG9ydCB7IFJlbW92ZVF1b3RlcywgUmVtb3ZlQnJhY2tldHMsIENvdW50IH0gZnJvbSAnLi4vU2NyaXB0cy9IZWxwZXJzJzsgLy9BTkNIT1IgLSBJbXBvcnRhbnQgZnVuY3Rpb25zIHRvIGJlIHVzZWQgd2hpbGUgcGFyc2luZwovL0NoZWNraW5nIGlmIHN0cmluZyBpcyBlbXB0eS4gVGhlIHdheSB3ZSBjaGVjayBzdHJpbmcgaXMgZW1wdHkgb3Igbm90IGJvaWxzIGRvd24gdG8gaG93IGNsZWFuZWRfc291cmNlZGF0YSBzZWVzIGVtcHR5IHN0cmluZyBzCi8vTmVlZHMgaW1wcm92ZW1lbnQKCmZ1bmN0aW9uIElzU3BlY2lhbENoYXIodiwgaSkgewogIHJldHVybiB2W2ldID09ICc/JyB8fCB2W2ldID09ICc9JyAmJiB2W2kgKyAxXSAhPSAnPScgJiYgdltpIC0gMV0gIT0gJz0nIHx8IHZbaV0gPT0gJ3wnIHx8IHZbaV0gPT0gJzsnIHx8IHZbaV0gPT0gJyYnIHx8IHZbaV0gPT0gJ14nIHx8IHZbaV0gPT0gJyUnIHx8IHZbaV0gPT0gJyQnIHx8IHZbaV0gPT0gJyMnIHx8IHZbaV0gPT0gJ0AnIHx8IHZbaV0gPT0gJyEnIHx8IHZbaV0gPT0gJzonIHx8IHZbaV0gPT0gJysnIHx8IHZbaV0gPT0gJywnIHx8IHZbaV0gPT0gJyUnIHx8IHZbaV0gPT0gJy0nIHx8IHZbaSArIDFdID09ICcpJyB8fCB2W2ldID09ICcvJyB8fCB2W2ldID09ICcqJyB8fCB2W2ldID09ICc+JyB8fCB2W2ldID09ICc8JzsKfQoKZnVuY3Rpb24gSXNDb25kaXRpb25hbE9wZXJhdG9yKGUpIHsKICByZXR1cm4gZS5pbmNsdWRlcygnPicpIHx8IGUuaW5jbHVkZXMoJzwnKSB8fCBlLmluY2x1ZGVzKCc9PScpIHx8IGUuaW5jbHVkZXMoJyE9Jyk7Cn0KCmZ1bmN0aW9uIElzUmVzZXJ2ZWRLZXl3b3JkKGUpIHsKICByZXR1cm4gZS5pbmNsdWRlcygn4KSm4KWB4KS54KSw4KS+4KSTJykgfHwgZS5pbmNsdWRlcygn4KSw4KSa4KSo4KS+JykgfHwgZS5pbmNsdWRlcygn4KSF4KSo4KWN4KSv4KSl4KS+JykgfHwgZS5pbmNsdWRlcygn4KSH4KSo4KSq4KWB4KSfJykgfHwgZS5pbmNsdWRlcygn4KSq4KWB4KS2JykgfHwgZS5pbmNsdWRlcyhBY3RpdmVMYW5ndWdhZUtleXdvcmRzLlByaW50KSB8fCBlLmluY2x1ZGVzKEFjdGl2ZUxhbmd1Z2FlS2V5d29yZHMuSWYpIHx8CiAgLyogY2xlYW5lZF9zb3VyY2VkYXRhW2sgKyAxXSA9PSAnPScqLwogIGUgPT0gJ30nOwp9IC8vQ2hlY2tpbmcgaWYgZWxlbWVudCBpcyBhIHB1cmUgZXZhbHVhdGlvbiBsaWtlIDErMiwgMjAqMzQsIDQwKzYtOTggZXRjCgoKZnVuY3Rpb24gaXNQdXJlRXZhbChlbGVtZW50KSB7CiAgaWYgKC9eKFstK10/WzAtOV0qXC4/WzAtOV0rW1wvXCtcLVwqXSkrKFstK10/WzAtOV0qXC4/WzAtOV0rKSokL2dtLnRlc3QoZWxlbWVudCkpIHsKICAgIHJldHVybiB0cnVlOwogIH0KfSAvL0NoZWNraW5nIGlmIGFuIGVsZW1lbnQgaXMgY2FsY3VsYXRpb24gdG8gYmUgcGVyZm9ybWVkCgoKZnVuY3Rpb24gaXNDYWxjdWxhdGlvbihlbGVtZW50KSB7CiAgaWYgKCFpc051bWJlcihlbGVtZW50KSkgewogICAgaWYgKChlbGVtZW50LmluY2x1ZGVzKCcrJykgfHwgZWxlbWVudC5pbmNsdWRlcygnJScpIHx8IGVsZW1lbnQuaW5jbHVkZXMoJy0nKSB8fCBlbGVtZW50LmluY2x1ZGVzKCcqJykgfHwgZWxlbWVudC5pbmNsdWRlcygnLycpKSAmJiAoZWxlbWVudC5pbmNsdWRlcygnKCcpICYmIGVsZW1lbnQuaW5jbHVkZXMoJyknKSB8fCAhZWxlbWVudC5pbmNsdWRlcygnKCcpICYmICFlbGVtZW50LmluY2x1ZGVzKCcpJykpICYmIGVsZW1lbnQuY2hhckF0KGVsZW1lbnQubGVuZ3RoIC0gMSkgIT0gJysnKSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogIH0KfSAvL3JlbW92aW5nIGJyYWNrZXRzIGZyb20gZWxlbWVudAoKCmZ1bmN0aW9uIGlzQXJyYXlPcGVyYXRpb24oZWxlbWVudCkgewogIC8vVG8gZmluZCBQYXR0ZXJucyBsaWtlIEFycmF5WzJdLCBBcnJheVtpbmRleF0gZXRjCiAgZWxlbWVudCA9IFJlbW92ZUJyYWNrZXRzKGVsZW1lbnQpOwoKICBpZiAoZWxlbWVudC5jaGFyQXQoZWxlbWVudC5sZW5ndGggLSAxKSA9PSAnXScgJiYgZWxlbWVudC5pbmNsdWRlcygnWycpICYmIGVsZW1lbnQuY2hhckF0KDApICE9ICdbJykgewogICAgcmV0dXJuIHRydWU7CiAgfQp9IC8vcHJlcGFyaW5nIHNvdXJjZWRhdGEgZm9yIGVhc3kgcGFyc2luZyBieSBoYW5kbGluZyBuZXcgbGluZXMsIGVudGVycyBldGMuCi8vY2xlYW5pbmcgdXAgdGhlIGRhdGEgdG8gZ2V0IGEgc3VpdGFibGUgdmVyc2lvbiBvZiBzb3VyY2VkYXRhLiBpdCdzIGJldHRlciB0byBnZXQgc3VpdGFibGUgdmVyc2lvbiBiZWNhdXNlIHVzZXJzIGNhbiB0eXBlIHdoYXQgdGhleSB3aXNoIGJ1dCB3ZSBuZWVkIHRvIG1haW50YWluCi8vaW50ZWdyaXR5IG9mIHByb2dyYW0gaW4gZXZlcnkgcG9zc2libGUgY29uZGl0aW9uLiBTbywgd2UgY2xlYW4gYW5kIHJlZmFjdG9yIHJhdyBjb2RlIHRvIHJlbW92ZSB1bm5lY2Vzc2FyeSBkYXRhLgoKCmZ1bmN0aW9uIEdldENsZWFuU291cmNlZGF0YShzb3VyY2VkYXRhLCBjbGVhbmVkX3NvdXJjZWRhdGEsIGltcHVyaXRpZXMpIHsKICBzb3VyY2VkYXRhID0gU291cmNlRGF0YVJlcGxhY2Vmb3JFYXN5UGFyc2luZyhzb3VyY2VkYXRhKTsKICBzb3VyY2VkYXRhLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgIC8vZmluZGluZyB0aGUgZWxlbWVudHMgd2hpY2ggaGFzID0iIGluIGl0IHNvIHRoYXQgdG8gc2VwcmF0ZSB0aGVtIGludG8gbmFtZSw9PSxzd2FuYW5kIGlmIGlucHV0IGlzIG5hbWU9InN3YW5hbmQiLgogICAgLy9XZSBkZWZpbmUgc3VjaCBlbGVtZW50cyBhcyBpbXB1cml0ZXMuIFdlIHByb2Nlc3MgdGhlbSwgYnJpbmcgdGhlbSBpbnRvIGEgc3VpdGFibGUgZm9ybSBhbmQgcHVzaCB0byBjbGVhbmVkX3NwaXJjZWRhdGEKICAgIC8vVGhpcyBpcyBvdXIgY2xlYW5pbmcgZmFjdG9yeQogICAgaWYgKCFlbGVtZW50LmluY2x1ZGVzKCc9PScpICYmIChlbGVtZW50LmluZGV4T2YoJz0iJykgPiAtMSB8fCBlbGVtZW50LmluZGV4T2YoJz0nKSA+IDAgfHwgZWxlbWVudC5jaGFyQXQoMCkgPT0gJz0nKSAmJiBlbGVtZW50ICE9ICc9PScpIHsKICAgICAgaW1wdXJpdGllcy5wdXNoKGVsZW1lbnQpOyAvL3B1c2ggc3VjaCBlbGVtZW50IGFzIGltcHVyaXR5IGluIGltcHVyaXRpZXMKCiAgICAgIHZhciBlbGVtZW50cyA9IGVsZW1lbnQuc3BsaXQoJz0nKTsKICAgICAgdmFyIGluZGV4ID0gY2xlYW5lZF9zb3VyY2VkYXRhLmxlbmd0aDsKICAgICAgY2xlYW5lZF9zb3VyY2VkYXRhW2luZGV4XSA9IGVsZW1lbnRzWzBdOwogICAgICBjbGVhbmVkX3NvdXJjZWRhdGFbaW5kZXggKyAxXSA9ICc9JzsKICAgICAgY2xlYW5lZF9zb3VyY2VkYXRhW2luZGV4ICsgMl0gPSBlbGVtZW50c1sxXTsKICAgIH0gLy9hcyBsb25nIGFzIGVsZW1lbnQgaXMgcHVyZSwgcHVzaCBpdCB0byBuZXcgYW5kIGNsZWFuIHZlcnNpb24gb2Ygc291cmNlZGF0YQoKCiAgICBpZiAoIWltcHVyaXRpZXMuaW5jbHVkZXMoZWxlbWVudCkpIHsKICAgICAgY2xlYW5lZF9zb3VyY2VkYXRhLnB1c2goZWxlbWVudCk7CiAgICB9IC8vCgogIH0pOyAvL3JlbW92aW5nIGVtcHR5ICIiIHZhbHVlcyBmb3IgZmluYWwgdmVyc2lvbiBvZiBzb3VyY2VkYXRhCiAgLy9TRUNUSU9OIEZJbmFsIHNvdXJjZWRhdGEgY2xlYW5pbmcKCiAgY2xlYW5lZF9zb3VyY2VkYXRhID0gY2xlYW5lZF9zb3VyY2VkYXRhLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgcmV0dXJuIGl0ZW0gIT09ICcnOwogIH0pOwogIHJldHVybiBjbGVhbmVkX3NvdXJjZWRhdGE7Cn0KCmZ1bmN0aW9uIEdldGNsZWFuZWRFeHByZXNzaW9uKGV4cHJlc3Npb24pIHsKICBleHByZXNzaW9uID0gZXhwcmVzc2lvbi5yZXBsYWNlKC8gL2csICcnKTsKICBleHByZXNzaW9uID0gUmVtb3ZlUXVvdGVzKGV4cHJlc3Npb24pOwogIGV4cHJlc3Npb24gPSBleHByZXNzaW9uLnJlcGxhY2UoL1woL2csICcnKTsKICBleHByZXNzaW9uID0gZXhwcmVzc2lvbi5yZXBsYWNlKC9cKS9nLCAnJyk7CiAgcmV0dXJuIGV4cHJlc3Npb247Cn0gLy9UbyBjb252ZXJ0ICdhK2ItYypkJyBpbnRvIFsnYScsJysnLCctJywnYycsJyonLCdkJ10KCgpmdW5jdGlvbiBTcGxpdEVsZW1lbnRzQXJyYXkoZWxlbWVudCwgbXVsdGlDYWwpIHsKICBlbGVtZW50ID0gbXVsdGlDYWwgPyBlbGVtZW50IDogUmVtb3ZlQnJhY2tldHMoZWxlbWVudCk7CgogIGlmIChJc0NvbmRpdGlvbmFsT3BlcmF0b3IoZWxlbWVudCkpIHsKICAgIGVsZW1lbnQgPSBlbGVtZW50LnJlcGxhY2UoLycgJy9nLCAnJyk7CiAgfSAvL2dldCBpbmRleCBvZiBvcGVyYXRpb24gZnJvbSB1cGRhdGVkIHRva2VucywgYXMgYSByZWZlcmVuY2UKCgogIHZhciBTdHJpbmdWYXIgPSBbXTsgLy8gaGVyZSBTdHJWYXIgdmFsdWVzIHdpbGwgZ2V0IHB1c2hlZAoKICB2YXIgU3RyVmFyID0gJyc7IC8vIGl0cyB1c2VkIHRvIHJlYWQgdmFyIHZhbHVlcyBvZiBhbnkgdHlwZSAoYW5uYSxhLGJhZCx4IGV0Yy4pIGFuZCBwdXNoIGl0IHRvIFN0cmluZ1ZhcgogIC8vICB2YXIgSGluZGlSZWdleCA9IC8oPzpefFxzKVtcdTA5MDAtXHUwOTdGXSs/KD86XHN8JCkvZwoKICBmb3IgKHZhciBqID0gMDsgaiA8IGVsZW1lbnQubGVuZ3RoOyBqKyspIHsKICAgIC8vIGZpbmQgaWYgZWxlbWVudFtqXSBpcyBhbHBoYWJldAogICAgdmFyIGZsYWcgPSBmYWxzZTsKCiAgICBpZiAoL15bQS1aXSskL2kudGVzdChlbGVtZW50W2pdKSB8fCBlbGVtZW50W2pdID09ICdbJyB8fCBlbGVtZW50W2pdID09ICddJyB8fCBlbGVtZW50W2pdID09ICciJyB8fCBlbGVtZW50W2pdID09ICdcJycgfHwgaXNOdW1iZXIoZWxlbWVudFtqXSkpIHsKICAgICAgU3RyVmFyID0gU3RyVmFyICsgZWxlbWVudFtqXTsgLy9rZWVwIG9uIHB1c2hpbmcgZm9yIGxvbmcgdmFyaWFibGUgbmFtZXMgYXMgc3RyaW5ncyBlLmcgaGVsbG8sIGthbGFhbQoKICAgICAgZmxhZyA9IHRydWU7CiAgICB9CgogICAgaWYgKGVsZW1lbnRbal0gPT0gJyknIHx8IGVsZW1lbnRbal0gPT0gJygnKSB7CiAgICAgIFN0cmluZ1Zhci5wdXNoKGVsZW1lbnRbal0pOwogICAgICBmbGFnID0gdHJ1ZTsKICAgIH0gLy90byBzb2x2ZSBbIkFnZSAiXSBpbnRvIFsiQWdlIl0sIHNvIHRoYXQgaXQgY2FuIGNvcnJlY3RseSBmaW5kIGl0cyB2YWx1ZSBpbiB1cGRhdGVkX3Rva2VucwoKCiAgICBpZiAoZWxlbWVudFtqXSA9PSAnICcgJiYgZWxlbWVudFtqICsgMV0gIT0gJysnKSB7CiAgICAgIFN0clZhciA9IFN0clZhciArIGVsZW1lbnRbal07CiAgICAgIGZsYWcgPSB0cnVlOwogICAgfSAvL2ZvciBjaGVja2luZyBlcXVpdmFsZW5jeQoKCiAgICBpZiAoZWxlbWVudFtqXSA9PSAnPScgJiYgZWxlbWVudFtqICsgMV0gPT0gJz0nKSB7CiAgICAgIFN0cmluZ1Zhci5wdXNoKFN0clZhcik7CiAgICAgIFN0cmluZ1Zhci5wdXNoKGVsZW1lbnRbal0gKyBlbGVtZW50W2ogKyAxXSk7CiAgICAgIFN0clZhciA9ICcnOwogICAgICBmbGFnID0gdHJ1ZTsKICAgICAgaiA9IGogKyAxOwogICAgfSAvL2ZvciBjaGVja2luZyAhPQoKCiAgICBpZiAoZWxlbWVudFtqXSA9PSAnIScgJiYgZWxlbWVudFtqICsgMV0gPT0gJz0nKSB7CiAgICAgIFN0cmluZ1Zhci5wdXNoKFN0clZhcik7CiAgICAgIFN0cmluZ1Zhci5wdXNoKGVsZW1lbnRbal0gKyBlbGVtZW50W2ogKyAxXSk7CiAgICAgIFN0clZhciA9ICcnOwogICAgICBmbGFnID0gdHJ1ZTsKICAgIH0KCiAgICBpZiAoSXNTcGVjaWFsQ2hhcihlbGVtZW50LCBqKSkgewogICAgICBTdHJpbmdWYXIucHVzaChTdHJWYXIpOyAvL3B1c2ggd2hhdGV2ZXIgc3RyaW5nIHdlIGhhdmUgZ290IGJlY2F1c2UgaXQncyBhIHN0cmluZyBub3csIGNhbnQgcHVzaCBvcGVyYXRvcnMgd2l0aCBpdAogICAgICAvL2ZpbmRpbmcgdGhlIGNhbGN1bGF0aW9ucyB0aGF0IHJlcXVpcmVkIGJyYWNrZXRzIGFuZCBhZGRpbmcgdGhlbQoKICAgICAgaWYgKGVsZW1lbnRbaiArIDFdICE9ICcpJykgewogICAgICAgIFN0cmluZ1Zhci5wdXNoKGVsZW1lbnRbal0pOyAvLyBmaXhpbmcgdGhlIGJpYXMKICAgICAgfQoKICAgICAgU3RyVmFyID0gJyc7IC8vIGVtcHR5aWcgdGhlIFN0clZhciBmb3IgbmV4dCB2YXJpYWJsZQoKICAgICAgZmxhZyA9IHRydWU7CiAgICB9IC8vcHVzaGluZyBoaW5kaSBjaGFycyBoZXJlCiAgICAvL1VQREFURUQKCgogICAgaWYgKGZsYWcgPT0gZmFsc2UpIHsKICAgICAgU3RyVmFyID0gU3RyVmFyICsgZWxlbWVudFtqXTsKICAgICAgZmxhZyA9IHRydWU7CiAgICB9CgogICAgaWYgKGVsZW1lbnRbaiArIDFdID09IG51bGwpIHsKICAgICAgU3RyaW5nVmFyLnB1c2goU3RyVmFyKTsgLy9maXhpbmcgYmlhcyBmb3IgbGFzdCBlbGVtZW50CgogICAgICBmbGFnID0gdHJ1ZTsKICAgIH0KICB9CgogIHJldHVybiBTdHJpbmdWYXI7Cn0gLy9nZXQgdGhlIHN0YXJ0IG9mIGxvb3AgaW4gdG9rZW5zIGFycmF5CgoKZnVuY3Rpb24gZ2V0TG9vcEluZGV4U3RhcnQobXV0YWJsZV90b2tlbnMsIGosIGNoZWNrLCBzZXRJbmRleCkgewogIHdoaWxlIChtdXRhYmxlX3Rva2Vuc1tqXS52YWx1ZSAhPSBjaGVjaykgewogICAgaWYgKG11dGFibGVfdG9rZW5zW2ogKyAxXS52YWx1ZSA9PSBjaGVjaykgewogICAgICBzZXRJbmRleCA9IGogKyAxOwogICAgfQoKICAgIGorKzsKICB9CgogIHJldHVybiBzZXRJbmRleDsKfSAvL3RoaXMgaXMgaG93IHdlIGhhbmRsZSBtdWxpdGlwbGUgY29uZGl0aW9ucyBsaWtlIOCkheCkl+CksCAoYWdlb25lPT0xMCAmJiBBdmVyYWdlQWdlPDEwMDAgJiYgYWdldHdvPjEwMCB8fCBhZ2VvbmU9PTEwKSBPUiAoYWdlb25lPT0xMCApCgoKZnVuY3Rpb24gaGFuZGxlbXVsdENvbmRpdGlvbnMoZWxlbWVudCkgewogIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudC5sZW5ndGg7IGkrKykgewogICAgaWYgKGVsZW1lbnQuY2hhckF0KGkpID09ICcmJyB8fCBlbGVtZW50LmNoYXJBdChpKSA9PSAnfCcpIHsKICAgICAgdmFyIGNvbmRpdGlvbiA9IGVsZW1lbnQuc3Vic3RyaW5nKDAsIGkgKyAyKTsKICAgICAgdmFyIFN3ZWVwZWRFbGVtZW50ID0gZWxlbWVudC5yZXBsYWNlKGNvbmRpdGlvbiwgJycpOwogICAgICB2YXIgb3BlcmF0b3IgPSAnJzsKCiAgICAgIGlmIChlbGVtZW50LmNoYXJBdChpKSA9PSAnJicpIHsKICAgICAgICBjb25kaXRpb24gPSBjb25kaXRpb24ucmVwbGFjZSgnJiYnLCAnJyk7CiAgICAgICAgb3BlcmF0b3IgPSAnJiYnOwogICAgICB9IGVsc2UgaWYgKGVsZW1lbnQuY2hhckF0KGkpID09ICd8JykgewogICAgICAgIGNvbmRpdGlvbiA9IGNvbmRpdGlvbi5yZXBsYWNlKCd8fCcsICcnKTsKICAgICAgICBvcGVyYXRvciA9ICd8fCc7CiAgICAgIH0KCiAgICAgIHJldHVybiB7CiAgICAgICAgU3dlZXBlZEVsZW1lbnQ6IFN3ZWVwZWRFbGVtZW50LAogICAgICAgIGNvbmRpdGlvbjogY29uZGl0aW9uLAogICAgICAgIG9wZXJhdG9yOiBvcGVyYXRvcgogICAgICB9OwogICAgfQogIH0KfSAvL0ZvciBvcGVyYXJpb25zIGxpa2UgTnVtYmVycy7gpKrgpYHgpLYoMjMpCgoKZnVuY3Rpb24gQWRkRWxlbWVudFRvQXJyYXkoU291cmNlZGF0YSwgaW5kZXgsIHVwZGF0ZWRfdG9rZW5zLCBFeGVjdXRpb25TdGFjaywgTGluZWJ5bGluZVNvdXJjZWRhdGEpIHsKICB2YXIgdG9rZW4gPSBTb3VyY2VkYXRhW2luZGV4XS52YWx1ZTsKICB0b2tlbiA9IHRva2VuLnJlcGxhY2UoJ+CkquClgeCkticsICcnKTsKICB2YXIgU3BsaXQgPSB0b2tlbi5zcGxpdCgnLicpOwogIHZhciBBcnJheSA9IFNwbGl0WzBdOwogIHZhciBFbGVtZW50dG9QdXNoID0gUmVtb3ZlQnJhY2tldHMoU3BsaXRbMV0pOwoKICBpZiAoRWxlbWVudHRvUHVzaC5jaGFyQXQoMCkgPT0gJyInIHx8IEVsZW1lbnR0b1B1c2guY2hhckF0KDApID09ICdcJycpIHsKICAgIEVsZW1lbnR0b1B1c2ggPSBFbGVtZW50dG9QdXNoOwogIH0gZWxzZSB7CiAgICBFbGVtZW50dG9QdXNoID0gdXBkYXRlZF90b2tlbnMuZmluZChmdW5jdGlvbiAoZWwpIHsKICAgICAgcmV0dXJuIGVsLm5hbWUgPT0gRWxlbWVudHRvUHVzaDsKICAgIH0pLnZhbHVlOwogIH0KCiAgdmFyIEFycmF5RWwgPSB1cGRhdGVkX3Rva2Vucy5maW5kKGZ1bmN0aW9uIChlbCkgewogICAgcmV0dXJuIGVsLm5hbWUgPT0gQXJyYXk7CiAgfSk7CiAgdmFyIEFycmF5VmFsdWUgPSBBcnJheUVsLnZhbHVlOwoKICBpZiAoQXJyYXlWYWx1ZSA9PSAnW10nKSB7CiAgICBBcnJheVZhbHVlID0gQXJyYXlWYWx1ZS5zcGxpdCgnLCcpOwogIH0KCiAgQXJyYXlWYWx1ZS5wdXNoKEVsZW1lbnR0b1B1c2gpOwogIHZhciBpbmRleG9mQXJyYXkgPSB1cGRhdGVkX3Rva2Vucy5pbmRleE9mKEFycmF5RWwpOwogIEFycmF5VmFsdWUgPSBBcnJheVZhbHVlLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgIHJldHVybiBlbCAhPSAnW10nOwogIH0pOwogIHVwZGF0ZWRfdG9rZW5zW2luZGV4b2ZBcnJheV0udmFsdWUgPSBBcnJheVZhbHVlOwogIHZhciBtZXNzYWdlID0gJ+CkhuCkquCkqOClhyAnICsgJyInICsgRWxlbWVudHRvUHVzaCArICciJyArICcg4KSV4KWLICcgKyArJyInICsgQXJyYXkgKyAnIicgKyAnIOCkh+CkuCDgpKzgpJXgpYfgpJ8oQXJyYXkpIOCkruClh+CkgiDgpKbgpLDgpY3gpJwoU3RvcmUpIOCkleCksOCkteCkvuCkr+CkviDgpLngpYh8ICc7CiAgdmFyIGV4cHJlc3Npb24gPSBTb3VyY2VkYXRhW2luZGV4XS52YWx1ZTsgLy8KCiAgdmFyIExpbmVudW1iZXIgPSBMaW5lYnlsaW5lU291cmNlZGF0YS5pbmRleE9mKGV4cHJlc3Npb24pOwogIExpbmVudW1iZXIgKz0gMTsKICBBZGR0b0V4ZWN1dGlvblN0YWNrKEV4ZWN1dGlvblN0YWNrLCAn4KSH4KSo4KSq4KWB4KSfJywgJ+CkleCkv+CkuOClgCDgpKjgpIggVkFMVUUg4KSV4KWLIOCkuOCljeCkteClgOCkleCkvuCksCDgpJXgpLDgpKjgpL4gJywgQXJyYXksIEVsZW1lbnR0b1B1c2gsIG1lc3NhZ2UsIExpbmVudW1iZXIpOwp9CgpmdW5jdGlvbiBBY2NlcHRJbnB1dGFuZFNldFZhbHVlKHRva2VucywgaW5kZXgsIHVwZGF0ZWRfdG9rZW5zLCBFeGVjdXRpb25TdGFjaywgTGluZWJ5bGluZVNvdXJjZWRhdGEpIHsKICB2YXIgU2V0SW5wdXRWYWx1ZUFzID0gdG9rZW5zW2luZGV4XS5BY2NlcHRBczsKICB2YXIgdmFsdWUgPSBwcm9tcHQoIuCkhuCkqiAiICsgJyInICsgU2V0SW5wdXRWYWx1ZUFzICsgJyInICsgIiDgpJXgpYsg4KSV4KWN4KSv4KS+IOCkleCkv+CkguCkruCkpCDgpKbgpYfgpKjgpL4g4KSa4KS+4KS54KSk4KWHIOCkueCliyA/Iik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUKCiAgdXBkYXRlZF90b2tlbnMucHVzaCh7CiAgICBuYW1lOiBTZXRJbnB1dFZhbHVlQXMsCiAgICB2YWx1ZTogdmFsdWUKICB9KTsKICB2YXIgbWVzc2FnZSA9ICfgpIbgpKrgpKjgpYcgJyArICciJyArIFNldElucHV0VmFsdWVBcyArICciJyArICcg4KSV4KWLICcgKyAnIicgKyB2YWx1ZSArICciJyArICcg4KSv4KWHIFZhbHVlIOCkpuClh+CkleCksCBDb21wdXRlciDgpJXgpYcgTWVtb3J5IOCkruClh+CkgiDgpKbgpLDgpY3gpJwoU3RvcmUpIOCkleCksOCkteCkvuCkr+CkviDgpLngpYh8ICc7CiAgdmFyIGV4cHJlc3Npb24gPSAn4KSH4KSo4KSq4KWB4KSfKCcgKyBTZXRJbnB1dFZhbHVlQXMgKyAnKSc7CiAgdmFyIExpbmVudW1iZXIgPSBMaW5lYnlsaW5lU291cmNlZGF0YS5pbmRleE9mKGV4cHJlc3Npb24pOwogIExpbmVudW1iZXIgKz0gMTsKICBBZGR0b0V4ZWN1dGlvblN0YWNrKEV4ZWN1dGlvblN0YWNrLCAn4KSH4KSo4KSq4KWB4KSfJywgJ+CkleCkv+CkuOClgCDgpKjgpIggVkFMVUUg4KSV4KWLIOCkuOCljeCkteClgOCkleCkvuCksCDgpJXgpLDgpKjgpL4gJywgU2V0SW5wdXRWYWx1ZUFzLCB2YWx1ZSwgbWVzc2FnZSwgTGluZW51bWJlcik7Cn0gLy9PbmUgb2YgdGhlIG1vc3QgZnJlcXVlbnRseSBuZWVkZWQgZnVuY3Rpb24KLy9pdCBpcyB1c2VkIHRvIGNhbGN1bGF0ZSB2YXJpYWJsZSB2YWx1ZXMgbGlrZSB4PSB5KjEwMCAoeSoxMDAgd2lsbCBiZSBjYWxjdWxhdGVkIGhlcmUpCi8vb3IgQXJyYXlbaV09IHgrYWdlb25lLiAoeCthZ2VvbmUpIGlzIGNhbHVjdWxhdGVkIGhlcmUKLy9JZiB5b3UgYXJlIG5vdCBnZXR0aW5nIHRoZSB2YWx1ZXMgcmlnaHQsIHRoaXMgaXMgd2hlcmUgeW91IHNob3VsZCBzdGFydCBkZWJ1Z2dpbmcKCgpmdW5jdGlvbiBDYWxjdWxhdGVWYWx1ZXMoY2FsY3VsYXRpb24sIGosIHVwZGF0ZWRfdG9rZW5zLCBtdWx0aUNhbCkgewogIHZhciByZXN1bHQ7CgogIHRyeSB7CiAgICB2YXIgY2FsY3VsYXRpb25BcnJheSA9IFNwbGl0RWxlbWVudHNBcnJheShjYWxjdWxhdGlvbiwgbXVsdGlDYWwpOwogICAgdmFyIFN0cmluZ1ZhciA9IFNldFZhbHVlcyhjYWxjdWxhdGlvbkFycmF5LCB1cGRhdGVkX3Rva2Vucyk7CiAgICB2YXIgam9pblN0cmluZ1ZhciA9IFN0cmluZ1Zhci5qb2luKCcnKTsKICAgIHZhciBOZXdTdHJpbmdWYXIgPSAnJzsgLy9ldmFsdWF0ZSB0aGUgZXhlcHJlc3Npb24gYXMgaXQgaXMgd2hlbiBtdWx0aWNhbCBpcyB0cnVlCiAgICAvL2ZvciBleHByZXNzaW9ucyBsaWtlIGM9KGFnZW9uZSthZ2V0d28pLzIgKyAoYWdlb25lK2FnZXR3bykqMgoKICAgIGlmIChpc051bWJlcihqb2luU3RyaW5nVmFyLmNoYXJBdCgwKSkgfHwgbXVsdGlDYWwpIHsKICAgICAgTmV3U3RyaW5nVmFyID0gZXZhbChqb2luU3RyaW5nVmFyKTsKICAgIH0gLy9Ob3QgcmVhbHRlZCB0byBudW1iZXJzIGF0IGFsbCBidXQgc3RyaW5ncwogICAgZWxzZSBpZiAoIWlzTnVtYmVyKGpvaW5TdHJpbmdWYXIuY2hhckF0KDApKSkgewogICAgICAgIFN0cmluZ1Zhci5mb3JFYWNoKGZ1bmN0aW9uIChlbCkgewogICAgICAgICAgaWYgKGVsICE9ICcrJykgewogICAgICAgICAgICBlbCA9IGVsLnRvU3RyaW5nKCk7CiAgICAgICAgICAgIE5ld1N0cmluZ1ZhciA9IE5ld1N0cmluZ1ZhciArIGVsOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIFN0cmluZ1ZhciA9IFN0cmluZ1ZhcjsKICAgICAgfQoKICAgIHJlc3VsdCA9IFN0cmluZ1Zhci5sZW5ndGggPiAxID8gTmV3U3RyaW5nVmFyIDogU3RyaW5nVmFyOwogIH0gY2F0Y2ggKGUpIHsKICAgIC8vaWYgYz1hK2IsIGFuZCBlaXRoZXIgYixhIGlzIHVuZGVmaW5lZAogICAgcmVzdWx0ID0gZTsKICB9CgogIHJldHVybiByZXN1bHQ7Cn0gLy9IYXZlIHRvIG1vdmUgdGhpcyB0d28gZnVuY3Rpb25zIHRvIFB1c2hmdW5jdGlvbnMuanMKCgpmdW5jdGlvbiBQdXNoU2V0QXJyYXlJbmRleFZhbHVlKHZhbHVlLCB0b2tlbnMsIGRhdGEsIGkpIHsKICB0b2tlbnMucHVzaCh7CiAgICB0eXBlOiAnU2V0QXJyYXlJbmRleFZhbHVlJywKICAgIHZhbHVlOiB2YWx1ZSwKICAgIFZhbHVlVG9TZXQ6IGRhdGFbaSArIDJdIC8vc2tpcHBpbmcgPQoKICB9KTsKfQoKZnVuY3Rpb24gUHVzaEdldEFycmF5SW5kZXhWYWx1ZSh2YWx1ZSwgdG9rZW5zKSB7CiAgdG9rZW5zLnB1c2goewogICAgdHlwZTogJ0dldEFycmF5SW5kZXhWYWx1ZScsCiAgICB2YWx1ZTogdmFsdWUKICB9KTsKfSAvL1BlcmZvcm1zIG9ubHkgQXJyYXkgT3BlcmF0aW9ucwovL2NvbnZlcnRzIEFycmF5W2FdIGludG8gW0FycmF5LCBhXQovL1RoaXMgaGVscHMgdXMgdG8gZmluZCB0aGVpciByZXNwZWN0aXZlIHZhbHVlcyBlYXNpbHkgaW4gdXBkYXRlZF90b2tlbnMKCgpmdW5jdGlvbiBDcmVhdGVBcnJheUVsZW1lbnQoVmFsdWUsIGl0ZXJhdG9yKSB7CiAgdmFyIEFycmF5RWxlbWVudCA9IFJlbW92ZUJyYWNrZXRzKFZhbHVlKTsgLy9TZXByYXRpbmcgb3V0IGluZGV4IGlkZW50aWZpZXIuIGEgZnJvbSBBcnJheVthXQoKICB2YXIgZWxlbWVudCA9IEFycmF5RWxlbWVudDsKICBlbGVtZW50ID0gZWxlbWVudC5yZXBsYWNlKCddJywgJycpOwogIHZhciBTcGxpdCA9IGVsZW1lbnQuc3BsaXQoJ1snKTsKICBTcGxpdFsxXSA9IGl0ZXJhdG9yOwogIFNwbGl0ID0gU3BsaXQuam9pbignWycpOwogIFNwbGl0ID0gU3BsaXQgKyAnXSc7CiAgQXJyYXlFbGVtZW50ID0gU3BsaXQ7CiAgQXJyYXlFbGVtZW50ID0gQXJyYXlFbGVtZW50LnJlcGxhY2UoLycgJy9nLCAnJyk7CiAgcmV0dXJuIEFycmF5RWxlbWVudDsKfSAvL1RoaXMgZnVuY3Rpb24gaXMgdXNlZCB0byBnZXQgYXJyYXkgb3Igc3RyaW5nIGVsZW1lbnRzLiBlLmcgQXJyYXlbMl0sIFN0cmluZ1s1XQovL0hlYXZpbHkgdXNlZCBieSBjb21waWxlciBpbiBsb29wcwoKCmZ1bmN0aW9uIFNldEFycmF5b3JTdHJpbmdFbGVtZW50KE9yaWdpbmFsRWxlbWVudCwgQXJyYXlFbGVtZW50LCB1cGRhdGVkX3Rva2VucywgaXRlcmF0b3IsIE5ld1ZhbHVlLCB0b2tlbnMsIEV4ZWN1dGlvblN0YWNrLCBMaW5lYnlsaW5lU291cmNlZGF0YSkgewogIHZhciB2YXJpYWJsZSA9IEFycmF5RWxlbWVudDsKICBBcnJheUVsZW1lbnQgPSBBcnJheUVsZW1lbnQucmVwbGFjZSgnXScsICcnKTsKICB2YXIgU3BsaXQgPSBBcnJheUVsZW1lbnQuc3BsaXQoJ1snKTsKICB2YXIgaW5kZXhDb2xsZWN0ZWQgPSBTcGxpdFsxXTsKICB2YXIgRWxlbWVudCA9IHVwZGF0ZWRfdG9rZW5zLmZpbmQoZnVuY3Rpb24gKGVsKSB7CiAgICByZXR1cm4gZWwubmFtZSA9PSBOZXdWYWx1ZTsKICB9KTsgLy9JZiBlbGVtZW50IGlzIGFuIGFzc2lnbmVkIHZhcmlhYmxlLiBGaW5kIHRoZSB2YWx1ZSBhbmQgc2V0IGl0LgoKICBpZiAoRWxlbWVudCkgewogICAgaWYgKGlzQ2FsY3VsYXRpb24oTmV3VmFsdWUpKSB7CiAgICAgIC8vIFRoaXMgaXMgdG8gc2V0IHg9IHkqMTAwLCBBcnJheVtpXT0geCthZ2VvbmUuCiAgICAgIHZhciBfdG9rZW4gPSB0b2tlbnMuZmluZChmdW5jdGlvbiAoZWwpIHsKICAgICAgICByZXR1cm4gZWwudmFsdWUgPT0gTmV3VmFsdWU7CiAgICAgIH0pOwoKICAgICAgdmFyIGogPSB0b2tlbnMuaW5kZXhPZihfdG9rZW4pIC0gMTsKCiAgICAgIHZhciBfdmFsdWUgPSBDYWxjdWxhdGVWYWx1ZXMoTmV3VmFsdWUsIGosIHVwZGF0ZWRfdG9rZW5zKTsKCiAgICAgIE5ld1ZhbHVlID0gX3ZhbHVlOwogICAgfQoKICAgIE5ld1ZhbHVlID0gRWxlbWVudC52YWx1ZTsKICB9CgogIGlmIChpdGVyYXRvciA9PSB0cnVlKSB7CiAgICAvL2ZvciBBcnJheVthXT1hCiAgICBpZiAoIWlzQ2FsY3VsYXRpb24oTmV3VmFsdWUpKSB7CiAgICAgIE5ld1ZhbHVlID0gaW5kZXhDb2xsZWN0ZWQ7CiAgICB9CiAgfSAvL2lmIGZyZXNoIG5ld3ZhbHVlIGlzIGZvdW1kLiB0aGUgb25lIHdoaWNoIGRvZXNudCB5ZXQgZXhpc3QgaW4gdGhlIHByb2dyYW0sIHRoZW4gcnVuIHRoaXMuCiAgZWxzZSB7CiAgICAgIE5ld1ZhbHVlID0gTmV3VmFsdWU7CiAgICB9CgogIHZhciB0b2tlbiA9IHVwZGF0ZWRfdG9rZW5zLmZpbmQoZnVuY3Rpb24gKGVsKSB7CiAgICByZXR1cm4gZWwubmFtZSA9PSBTcGxpdFswXTsKICB9KTsKICB2YXIgaW5kZXggPSB1cGRhdGVkX3Rva2Vucy5pbmRleE9mKHRva2VuKTsgLy91cGRhdGVkX3Rva2VucyB2YWx1ZXMgd2lsbCBhbHNvIGdldCB1cGRhdGVkIHRocnVnaCB0aGlzIHJlZmVyZW5jZQoKICB2YXIgdmFsdWUgPSB0b2tlbi52YWx1ZTsKICB2YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCk7CiAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKCddJywgJycpOwogIHZhbHVlID0gdmFsdWUucmVwbGFjZSgnWycsICcnKTsKICB2YWx1ZSA9IHZhbHVlLnNwbGl0KCcsJyk7CgogIGlmIChpdGVyYXRvciA9PSB0cnVlKSB7CiAgICAvL1RoaXMgaXMgZm9yIEFycmF5W2FdPWEKICAgIHZhbHVlW2luZGV4Q29sbGVjdGVkXSA9IGluZGV4Q29sbGVjdGVkOwogIH0gZWxzZSB7CiAgICAvL1J1biB3aGVuIGl0ZXJhdG9yIGlzIG5vdCBuZWVkZWQuIGl0ZXJhdG9yIGlzIHByZXNlbnQgaW4gQXJyYXlFbGVNRU5UIEFMUkVBRFkuIFRoaXMgaXMgZm9yIEFycmF5W2ldPSdTd2FuYW5kJwogICAgdmFsdWVbaW5kZXhDb2xsZWN0ZWRdID0gTmV3VmFsdWU7CiAgfSAvL2NvbnZlcnRpbmcgYXJyYXkgYmFjayBpbnRvIHRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgaXQgZm9yIGJldHRlciBwcmludGFiaWxsaXR5CgoKICB1cGRhdGVkX3Rva2Vuc1tpbmRleF0udmFsdWUgPSAnWycgKyB2YWx1ZS50b1N0cmluZygpICsgJ10nOwogIHZhciBtZXNzYWdlID0gJyBDb21wdXRlciDgpKjgpYcsICcgKyAnIicgKyB2YXJpYWJsZSArICciJyArICcg4KSV4KWLLCAnICsgJyInICsgdmFsdWVbaW5kZXhDb2xsZWN0ZWRdICsgJyInICsgJyDgpK/gpYcgVkFMVUUg4KSm4KWHIOCkleCksCDgpIXgpKrgpKjgpYcgTWVtb3J5IOCkruClh+CkgiDgpKbgpLDgpY3gpJwoU3RvcmUpIOCkleCksOCkteCkvuCkr+CkviDgpLngpYggfCc7CiAgdmFyIGV4cHJlc3Npb24gPSBPcmlnaW5hbEVsZW1lbnQ7CiAgZXhwcmVzc2lvbiA9IEdldGNsZWFuZWRFeHByZXNzaW9uKGV4cHJlc3Npb24pOwogIExpbmVieWxpbmVTb3VyY2VkYXRhLmZvckVhY2goZnVuY3Rpb24gKGVsLCBpbmRleCkgewogICAgZWwgPSBHZXRjbGVhbmVkRXhwcmVzc2lvbihlbCk7CgogICAgaWYgKGVsID09IGV4cHJlc3Npb24pIHsKICAgICAgQWRkdG9FeGVjdXRpb25TdGFjayhFeGVjdXRpb25TdGFjaywgJz0nLCAnIOCkleCkv+CkuOClgCBWQVJJQUJMRSDgpJXgpYsg4KSo4KSIIFZBTFVFIOCkuOClh+CknyDgpJXgpLDgpKjgpL4gICAnLCB2YXJpYWJsZSwgdmFsdWVbaW5kZXhDb2xsZWN0ZWRdLCBtZXNzYWdlLCBpbmRleCArIDEpOwogICAgfQogIH0pOyAvLyBsZXQgTGluZW51bWJlcj0nJwp9IC8vUHJpbnRpbmcgYSBzcGVjaWZpYyBhcnJheSBlbGVtZW50IGxpa2UgQXJyYXlbMF0sIEFycmF5WzNdIGV0Yy4KLy9QcmludGluZyBhIGR5bmFtaWMgYXJyYXkgZWxlbWVudCBsaWtlIEFycmF5W2ldLCBBcnJheVtpKzFdIGV0Yy4KCgpmdW5jdGlvbiBHZXRBcnJheW9yU3RyaW5nRWxlbWVudChlbGVtZW50LCB1cGRhdGVkX3Rva2VucywgTmV3VmFsdWUpIHsKICBlbGVtZW50ID0gZWxlbWVudC5yZXBsYWNlKCddJywgJycpOwogIHZhciBTcGxpdCA9IGVsZW1lbnQuc3BsaXQoJ1snKTsKICB2YXIgaW5kZXhDb2xsZWN0ZWQgPSBTcGxpdFsxXTsKCiAgaWYgKGlzTnVtYmVyKGluZGV4Q29sbGVjdGVkKSkgewogICAgdmFyIHRva2VuID0gdXBkYXRlZF90b2tlbnMuZmluZChmdW5jdGlvbiAoZWwpIHsKICAgICAgcmV0dXJuIGVsLm5hbWUgPT0gU3BsaXRbMF07CiAgICB9KTsKICAgIHZhciBpbmRleCA9IHVwZGF0ZWRfdG9rZW5zLmluZGV4T2YodG9rZW4pOwogICAgdmFyIHZhbHVlID0gdG9rZW4udmFsdWUudG9TdHJpbmcoKTsKCiAgICBpZiAodG9rZW4udHlwZSA9PSAnQXJyYXknKSB7CiAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgnXScsICcnKTsKICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKCdbJywgJycpOwogICAgICB2YWx1ZSA9IHZhbHVlLnNwbGl0KCcsJyk7CgogICAgICBpZiAoTmV3VmFsdWUgIT0gdW5kZWZpbmVkKSB7CiAgICAgICAgaWYgKCFpc051bWJlcihOZXdWYWx1ZSkpIHsKICAgICAgICAgIE5ld1ZhbHVlID0gUmVtb3ZlUXVvdGVzKE5ld1ZhbHVlKTsKICAgICAgICAgIE5ld1ZhbHVlID0gTmV3VmFsdWUucmVwbGFjZSgvJy9nLCAnJyk7CiAgICAgICAgICBOZXdWYWx1ZSA9IE5ld1ZhbHVlLnJlcGxhY2UoL+KAmC9nLCAnJyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIE5ld1ZhbHVlID0gTmV3VmFsdWU7CiAgICAgICAgfQoKICAgICAgICB2YWx1ZVtpbmRleENvbGxlY3RlZF0gPSBOZXdWYWx1ZTsKICAgICAgICB1cGRhdGVkX3Rva2Vuc1tpbmRleF0udmFsdWUgPSB2YWx1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YWx1ZSA9IHZhbHVlW2luZGV4Q29sbGVjdGVkXTsKICAgICAgfQogICAgfSBlbHNlIGlmICh0b2tlbi50eXBlID09ICdzdHJpbmcnIHx8IHRva2VuLnR5cGUgIT0gJ0FycmF5JykgewogICAgICB2YWx1ZSA9IHZhbHVlLmNoYXJBdChpbmRleENvbGxlY3RlZCk7CiAgICB9CgogICAgcmV0dXJuIHZhbHVlOwogIH0KfSAvL05lZWRzIGltcHJvdmVtZW50CgoKZnVuY3Rpb24gRm9yTG9vcEFycmF5b3JTdHJpbmdPdXRwdXQoZWxlbWVudFZhbHVlLCBpdGVyYXRvciwgdXBkYXRlZF90b2tlbnMsIGdsb2JhbCkgewogIHZhciBDdXJyZW50RWxlbWVudCA9ICcnOwogIEN1cnJlbnRFbGVtZW50ID0gZWxlbWVudFZhbHVlLm5hbWUgKyAnWycgKyBpdGVyYXRvciArICddJzsgLy9Gb3VuZHZhbHVlIGlzIGRlY2lkZWQgaW4gdGhlIGZ1bmN0aW9uIGRlcGVuZGluZyB1cG9uIHRoZSB0eXBlLgogIC8vaWYgaXQncyBhcnJheSBydW4gYXJyYXlbMl0sIGlmIGl0cyBzdHJpbmcgcnVuIHN0cmluZy5jaGFyQXQoMikKCiAgdmFyIEZvdW5kVmFsdWUgPSBHZXRBcnJheW9yU3RyaW5nRWxlbWVudChDdXJyZW50RWxlbWVudCwgdXBkYXRlZF90b2tlbnMpOwogIGdsb2JhbC5vdXRwdXQgPSBnbG9iYWwub3V0cHV0ICsgRm91bmRWYWx1ZSArICdcbic7CiAgY29uc29sZS5sb2coJ2dsb2JhbC5vdXRwdXQ6JywgZ2xvYmFsLm91dHB1dCk7CiAgcmV0dXJuOwp9IC8vTW92ZSBpdCB0byB0eXBlY2hlY2tpbmcuanMKCgpmdW5jdGlvbiBpc051bWJlcihlbGVtZW50KSB7CiAgaWYgKC9eWzAtOV0qJC9nbS50ZXN0KGVsZW1lbnQpKSB7CiAgICByZXR1cm4gdHJ1ZTsKICB9Cn0gLy9vbmUgb2YgdGhlIGhlYXZpbHkgdXNlZCBmdW5jdGlvbgovL2NvbnZlcnRzIFsnYScsJysnLCdiJ10gaW50byBbYStiXSBhbmQgdGhlbiBpbnRvIFsyMywrLDddIHByb3ZpZGVkIGE9MjMgYW5kIGI9NwoKCmZ1bmN0aW9uIFNldFZhbHVlcyhTdHJpbmdWYXIsIHVwZGF0ZWRfdG9rZW5zKSB7CiAgU3RyaW5nVmFyLmZvckVhY2goZnVuY3Rpb24gKGVsLCBpKSB7CiAgICBlbCA9IGVsLnJlcGxhY2UoL1wgL2csICcnKTsKCiAgICBpZiAoZWwuY2hhckF0KGVsLmxlbmd0aCAtIDEpID09ICddJykgewogICAgICB2YXIgQXJyYXlFbGVtZW50VmFsdWUgPSBHZXRBcnJheW9yU3RyaW5nRWxlbWVudChlbCwgdXBkYXRlZF90b2tlbnMpOwogICAgICBBcnJheUVsZW1lbnRWYWx1ZSA9IEFycmF5RWxlbWVudFZhbHVlLnJlcGxhY2UoL1snIl0rL2csICcnKTsKICAgICAgU3RyaW5nVmFyW2ldID0gQXJyYXlFbGVtZW50VmFsdWU7CiAgICB9IC8vZmluZGluZyB2YXJpYWJsZSB2YWx1ZSBoZXJlCgoKICAgIHZhciB0b2tlbiA9IHVwZGF0ZWRfdG9rZW5zLmZpbmQoZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgcmV0dXJuIGVsZW1lbnQubmFtZSA9PSBlbDsKICAgIH0pOwoKICAgIGlmICh0b2tlbiAhPSB1bmRlZmluZWQpIHsKICAgICAgLy8gaWYgZXhpc3RzIHNldCBpdCdzIHZhbHVlCiAgICAgIFN0cmluZ1ZhcltpXSA9IHRva2VuLnZhbHVlOwogICAgfQogIH0pOwogIHJldHVybiBTdHJpbmdWYXI7Cn0gLy9BTkNIT1IKLy9Ob3cgd2UgaGFlIGNvbnZlcnRlZCBmb3VuZCAiYStiLWQiIGludG8gW2EsKyxiLC0sZF0KLy9Ob3cgbGV0cyBydW4gYSBsb29wcyBvbiBpdCB0byBjb252ZXJ0IGludG8gWzUsKyw2LC0sN10KLy9VcGRhdGVkX3Rva2VucyBpcyB1cGRhdGVkIGJ5IHJlcGxhY2luZyAidmFsdWU6YStiLWQiIHdpdGggInZhbHVlOjUrNi03Ii4KLy9hZnRlciBldmFsIGZ1bmN0aW9uIGl0IHdpbGwgYmUgc2V0IGFzICJ2YWx1ZToyIgoKCmZ1bmN0aW9uIFVwZGF0ZVVwZGF0ZWRfdG9rZW5zd2l0aFZhbHVlcyhwYXlsb2FkKSB7CiAgdmFyIFN0cmluZ1ZhciA9IHBheWxvYWQ7IC8vcnVuIGlmIGl0J3MgYXJpdGhtZXRpYyBvcGVyYXRpb24gbGlrZSBbIjUrNi03Il0KCiAgaWYgKGlzTnVtYmVyKFN0cmluZ1ZhclswXSkpIHsKICAgIHZhciB2YWx1ZSA9IGV2YWwoU3RyaW5nVmFyLmpvaW4oJycpKTsKICAgIHJldHVybiB2YWx1ZTsKICB9IGVsc2UgaWYgKFN0cmluZ1ZhclsxXSA9PSAnPT0nKSB7CiAgICB2YXIgYSA9IFN0cmluZ1ZhclswXS50b1N0cmluZygpOwogICAgdmFyIGIgPSBTdHJpbmdWYXJbMl0udG9TdHJpbmcoKTsKICAgIGEgPSBhLnJlcGxhY2UoLyIvZywgJycpOwogICAgYSA9IGEucmVwbGFjZSgvJy9nLCAnJyk7CiAgICBiID0gYi5yZXBsYWNlKC8nL2csICcnKTsKICAgIGIgPSBiLnJlcGxhY2UoLyIvZywgJycpOwoKICAgIHZhciBfdmFsdWUyID0gZXZhbChhID09IGIpOwoKICAgIHJldHVybiBfdmFsdWUyOwogIH0gLy9ydW4gaWYgaXQncyBTdHJpbmcgb3BlcmF0aW9uIGxpa2UgWyJyZWRkaXQiLCIrIiwgImlzIGdvYXQiXQogIGVsc2UgewogICAgICBpZiAoU3RyaW5nVmFyLmluY2x1ZGVzKCcrJykpIHsKICAgICAgICBTdHJpbmdWYXJbU3RyaW5nVmFyLmluZGV4T2YoJysnKV0gPSAnICc7CiAgICAgIH0KCiAgICAgIHZhciBfdmFsdWUzID0gU3RyaW5nVmFyLmpvaW4oJycpOwoKICAgICAgcmV0dXJuIF92YWx1ZTM7CiAgICB9Cn0gLy9IYW5kbGUgQmxvY2tzIGlzIGEgZnVuY3Rpb24gd2hpY2ggdGFrZXMgY2FyZSBvZiBuZXN0ZWQgYmxvY2sgYnkgdGFraW5nIGNhcmUgb2YgbmVzdGVkICd7JyBhbmQgJ30nIGJyYWNrZXRzCi8vaXQgdXNlcyB0aGUgc3RhY2sgdG8gcHVzaCBhbmQgcG9wIGJyYWNrZXRzIHRvIGFjY3VyYXRlbHkgaWRlbnRpZnkgc3RhcnQgYW5kIHRoZSBlbmQgb2YgdGhlIGJsb2NrCgoKZnVuY3Rpb24gSGFuZGxlQmxvY2tzKG11dGFibGVfdG9rZW5zLCBqLCBTdG9yZVJlc3VsdCkgewogIC8vU3RvcmVSZXN1bHQgaXMgdXNlZCB0byBwdXNoIGRhdGEgaW50byBpdCBpbiBjYXNlIG9mIGZvcmxvb3Agb3Igd2hpbGUgbG9vcCBjb25ldGV4dAogIC8vZm9yIGEgbm9ybWFsIGJsb2NrIGxpa2UgY29uZGl0aW9uYWwgYmxvY2sgaXQgbWlnaHQgbm90IG5lZWQgdG8gYmUgdXNlZCB5ZXQKICB2YXIgQXJyYXlCcmFja2V0cyA9IFtdOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc3RhbnQtY29uZGl0aW9uCgogIHdoaWxlICh0cnVlKSB7CiAgICBpZiAobXV0YWJsZV90b2tlbnNbal0udmFsdWUgPT0gJ3snKSB7CiAgICAgIEFycmF5QnJhY2tldHMucHVzaCh7CiAgICAgICAgdHlwZTogJ3snLAogICAgICAgIGluZGV4OiBqCiAgICAgIH0pOwoKICAgICAgaWYgKFN0b3JlUmVzdWx0ICE9IHVuZGVmaW5lZCkgewogICAgICAgIFN0b3JlUmVzdWx0LnB1c2gobXV0YWJsZV90b2tlbnNbal0pOwogICAgICB9CiAgICB9IGVsc2UgaWYgKG11dGFibGVfdG9rZW5zW2pdLnZhbHVlID09ICd9JykgewogICAgICAvL0FzIHNvb24gYXMgb3BlbiBicmFja2V0IGlzIGZvdW5kLCBwb3AgdGhlIGxhc3QgYXJyYXlicmFja2V0IHN0YWNrIHZhbHVlCiAgICAgIC8vdGhhdCdzIHRoZSBtYXRjaAogICAgICB2YXIgeCA9IEFycmF5QnJhY2tldHMucG9wKCk7CgogICAgICBpZiAoU3RvcmVSZXN1bHQgIT0gdW5kZWZpbmVkKSB7CiAgICAgICAgU3RvcmVSZXN1bHQucHVzaChtdXRhYmxlX3Rva2Vuc1tqXSk7CiAgICAgICAgbXV0YWJsZV90b2tlbnNbeC5pbmRleF0uc3RhcnRJbmRleCA9IHguaW5kZXg7CiAgICAgICAgbXV0YWJsZV90b2tlbnNbeC5pbmRleF0uRW5kSW5kZXggPSBqOwogICAgICB9IC8vc2V0IHN0YXJ0IGFuZCBlbmQgaW5kZXggdmFsdWUgZm9yIHRoYXQgeyB9IGJsb2NrCgoKICAgICAgbXV0YWJsZV90b2tlbnNbeC5pbmRleF0uc3RhcnRJbmRleCA9IHguaW5kZXg7CiAgICAgIG11dGFibGVfdG9rZW5zW3guaW5kZXhdLkVuZEluZGV4ID0gajsKCiAgICAgIGlmIChBcnJheUJyYWNrZXRzLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgLy9BcyBzb29uIGFzIHN0YWNrIGlzIGVtcHR5IHdlIGhhdmUgZmluaXNoZWQgb3VyIGxhc3QgbGJsb2NrCiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGlmIChTdG9yZVJlc3VsdCAhPSB1bmRlZmluZWQpIHsKICAgICAgICBTdG9yZVJlc3VsdC5wdXNoKG11dGFibGVfdG9rZW5zW2pdKTsKICAgICAgfQogICAgfQoKICAgIGorKzsKICB9CgogIHJldHVybiB7CiAgICBTdG9yZVJlc3VsdDogU3RvcmVSZXN1bHQsCiAgICBqOiBqCiAgfTsKfSAvL0hhbmRsZXMgY29uZGl0aW9uYWwgc3RhdGVtZW50cwovL0l0IGRvZXMgbm90IHJldHVybiB0cnVlIG9yIGZhbHNlIHJhdGhlciBpdCB0ZWxscyB1cyB3aGV0aGVyIHRvIHNraXAgdGhlIGV4ZWN1dGlvbiBvciBjb250aW51ZSBleGVjdXRpb24gZGVwZW5kaW5nIHVwb24gdHJ1dGggdmFsdWUgb2YgY29uZGl0aW9uCi8vSWYgdHJ1ZSAnaScgaXMgc2V0IHRvIGN1cnJlbnQgaW5kZXggcG9zaXRpb24sIGlmIGZhbHNlICdpJyBpcyBza2lwcGVkIHVudGlsIHRoZSBlbmQgb2YgY29uZGl0aW9uYWwgYmxvY2svCgoKZnVuY3Rpb24gSGFuZGxlQ29uZGl0aW9ucyhzb3VyY2VkYXRhLCBpLCB1cGRhdGVkX3Rva2VucykgewogIHZhciBlbGVtZW50ID0gc291cmNlZGF0YVtpXS52YWx1ZTsgLy9sZXQgdG9rZW49IHVwZGF0ZWRfdG9rZW5zLmZpbmQoZWw9PiBlbC5vcmlnaW5hbHZhbHVlPT1zb3VyY2VkYXRhW2ldLnZhbHVlKQoKICB2YXIgU3BsaXRBcnJheSA9IFNwbGl0RWxlbWVudHNBcnJheShlbGVtZW50KTsKICB2YXIgVmFsdWVzID0gU2V0VmFsdWVzKFNwbGl0QXJyYXksIHVwZGF0ZWRfdG9rZW5zKTsKICB2YXIgRm9yTG9vcENvbmRpdGlvblZhbHVlID0gVXBkYXRlVXBkYXRlZF90b2tlbnN3aXRoVmFsdWVzKFZhbHVlcyk7CgogIGlmIChGb3JMb29wQ29uZGl0aW9uVmFsdWUgPT0gZmFsc2UpIHsKICAgIHdoaWxlIChzb3VyY2VkYXRhW2kgKyAxXS52YWx1ZSAhPSAnfScpIHsKICAgICAgLy90b2tlbnMuc3BsaWNlKGkrMSwgMSk7CiAgICAgIC8vTm8gbmVlZCB0byBkZWxldGUgdG9rZW5zLCB3ZSBhcmUgaXVzdCBza2lwcGluZyBvdmVyIHRoZSB2YWx1ZXMgc28gdGhhdCB0aGV5IHdvbid0IGJlIHByaW50ZWQgb3IgcnVuCiAgICAgIGkrKzsKICAgIH0KCiAgICByZXR1cm4gaTsKICB9Cn0gLy9IYW5kbHkgZnVuY3Rpb24gdG8gc3BsaXQgYW5kIGpvaW4gQXJyYXlzCgoKZnVuY3Rpb24gU3BsaXRhbmRKb2luKGFycmF5LCBvdXRwdXQsIGVsZW1lbnQpIHsKICBhcnJheVsxXSA9IG91dHB1dDsKICB2YXIgSm9pbmFycmF5ID0gYXJyYXkuam9pbignWycpICsgJ10nOwogIGVsZW1lbnQgPSBKb2luYXJyYXk7CiAgcmV0dXJuIGVsZW1lbnQ7Cn0KCnZhciBBY2N1bXVsYXRlVmFsdWUgPSAnJzsKCmZ1bmN0aW9uIFJlc2V0VmFsdWUoKSB7CiAgQWNjdW11bGF0ZVZhbHVlID0gJyc7Cn0gLy9PbmUgb2YgdGhlIG1vc3QgaW1wb3J0YW50IGZ1bmN0aW9ucwovL1Rha2VzIGNhcmUgb2YgYWxsIGtpbmQgb2YgYXNzaWdubWVudHMgcHJvdmlkZWQgaW4gcmF3IHNvdXJjZWNvZGUKLy9NZXNzYWdlPSJIZWxsbyBXb3JsZCIsIE51bWJlcnM9WzEsMiwzLDQsNV0sIE51bWJlcnNbMl09MjMgZXRjLgovL0lmIGEgY2VydGFpbiB2YWx1ZSBpcyBub3QgYmVpbmcgYXNzaWduZWQgcHJvcGVybHkgc3RhcnQgZGVidWdpaW5nIGhlcmUKCgpmdW5jdGlvbiBBc3NpZ25vclVwZGF0ZVZhbHVlcyhzb3VyY2VkYXRhLCBpLCB1cGRhdGVkX3Rva2VucywgaXRlcmF0b3IsIE9yaWdpbmFsSXRlcmF0b3IsIGdsb2JhbCwgRXhlY3V0aW9uU3RhY2ssIExpbmVieWxpbmVTb3VyY2VkYXRhKSB7CiAgdmFyIHZhcmlhYmxlID0gc291cmNlZGF0YVtpIC0gMV0udmFsdWU7CiAgdmFyIHZhcnZhbHVlID0gc291cmNlZGF0YVtpICsgMV0udmFsdWU7CiAgdmFyIEZpbmFsVmFsdWUgPSAnJzsKCiAgaWYgKHZhcnZhbHVlID09ICciJyB8fCB2YXJ2YWx1ZSA9PSAnXCcnKSB7CiAgICB2YXJ2YWx1ZSA9ICcgJzsKICB9IC8vaWYgc29tZW9uZSBhY2NpZGVubHR5IHR5cGVzIE5hbWU94KSH4KSo4KSq4KWB4KSfIG9yIGFueSBvdGhlciBwcmltYXJ5IGtleXdvcmRzCgoKICBmdW5jdGlvbiBBc3NpZ25tZW50RXJyb3IodmFsdWUsIGtleXdvcmRzKSB7CiAgICBpZiAodmFsdWUgIT0gJycpIHsKICAgICAgZm9yICh2YXIgeCBpbiBrZXl3b3JkcykgewogICAgICAgIGlmIChrZXl3b3Jkc1t4XS5pbmNsdWRlcyh2YWx1ZSkpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSAvL2NoZWNrQXNzaWdubWVudEVycm9yKHZhcnZhbHVlLCBBY3RpdmVMYW5ndWdhZUtleXdvcmRzKTsKCgogIHZhciBlcnJvciA9IEFzc2lnbm1lbnRFcnJvcih2YXJ2YWx1ZSwgQWN0aXZlTGFuZ3VnYWVLZXl3b3Jkcyk7CgogIGlmIChlcnJvcikgewogICAgdmFyIF9lcnJvciA9ICdBc3NpZ25tZW50IGVycm9yIGluICcgKyAnIicgKyB2YXJpYWJsZSArICcgPSAnICsgJyInOwoKICAgIGdsb2JhbC5lcnJvci5wdXNoKF9lcnJvcik7CiAgfQoKICB2YXIgdmFydmFsdWVUeXBlID0gc291cmNlZGF0YVtpICsgMV0udHlwZTsKCiAgZnVuY3Rpb24gZmluZHZhbHVlaW5NZW1vcnkodikgewogICAgcmV0dXJuIHVwZGF0ZWRfdG9rZW5zLmZpbmQoZnVuY3Rpb24gKGVsKSB7CiAgICAgIHJldHVybiBlbC5uYW1lID09IHY7CiAgICB9KTsKICB9CgogIHZhciBtZW1vcnlfdmFsdWUgPSBmaW5kdmFsdWVpbk1lbW9yeSh2YXJ2YWx1ZSk7IC8vaWYgYT1iIGFuZCB1c2VyIGhhdmVuJ3QgZGVmaW5lZCBiIHlldAogIC8vZG9lc24ndCB3b3JrIG9uIGE9YitjLCB3aGVyZSBiIGlzIHVuZGVmaW5lZCwgY2FsY3VsYXRlVmFsdWVzIGZ1bmN0aW9uIHRha2VzIGNhcmUgb2YgdGhhdAoKICBmdW5jdGlvbiBjaGVja2lmVW5kZWZpbmVkKHYsIG12LCB0eXBlKSB7CiAgICBpZiAodHlwZSA9PSAndmFyaWFibGUnICYmICFpc051bWJlcih2KSAmJiBtdiA9PSB1bmRlZmluZWQpIHsKICAgICAgcmV0dXJuICJDYW5ub3Qgc2V0ICIuY29uY2F0KHZhcmlhYmxlLCAiIHRvIHVuZGVmaW5lZCA6ICIpLmNvbmNhdCh2LCAiIGlzIHVuZGVmaW5lZCAiKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9CgogIHZhciB1bmRlZmluZWRfZXJyb3IgPSBjaGVja2lmVW5kZWZpbmVkKHZhcnZhbHVlLCBtZW1vcnlfdmFsdWUsIHZhcnZhbHVlVHlwZSk7IC8vaWYgd2UgaGF2ZSBhbnkgdW5kZWZpbmVkIHZhcmlhYmxlcwoKICBpZiAodW5kZWZpbmVkX2Vycm9yICE9IGZhbHNlKSB7CiAgICBnbG9iYWwuZXJyb3IucHVzaCh1bmRlZmluZWRfZXJyb3IpOwogIH0gLy90byBjb3VudCB0aGUgbGVuZ3RoLCBOdW1iZXJzLuCkuOCkguCkluCljeCkr+CkvigpcwogIGVsc2UgaWYgKHZhcnZhbHVlLmluY2x1ZGVzKCfgpLjgpILgpJbgpY3gpK/gpL4nKSkgewogICAgICB2YXIgX1NwbGl0ID0gdmFydmFsdWUuc3BsaXQoJy4nKTsKCiAgICAgIHZhciBpdGVtID0gX1NwbGl0WzBdOwogICAgICB2YXIgSXRlbXZhbHVlID0gdXBkYXRlZF90b2tlbnMuZmluZChmdW5jdGlvbiAoZWwpIHsKICAgICAgICByZXR1cm4gZWwubmFtZSA9PSBpdGVtOwogICAgICB9KS52YWx1ZTsKCiAgICAgIGlmIChJdGVtdmFsdWUuaW5jbHVkZXMoJ1snKSkgewogICAgICAgIEl0ZW12YWx1ZSA9IEl0ZW12YWx1ZS50b1N0cmluZygpLnNwbGl0KCcsJyk7CiAgICAgIH0gZWxzZSBpZiAoSXRlbXZhbHVlLmxlbmd0aCA9PSAxKSB7CiAgICAgICAgSXRlbXZhbHVlID0gSXRlbXZhbHVlOwogICAgICB9IGVsc2UgewogICAgICAgIEl0ZW12YWx1ZSA9IEl0ZW12YWx1ZS50b1N0cmluZygpOwogICAgICB9CgogICAgICB2YXIgSXRlbXZhbHVlTGVuZ3RoID0gSXRlbXZhbHVlLmxlbmd0aDsKICAgICAgRmluYWxWYWx1ZSA9IEl0ZW12YWx1ZUxlbmd0aDsKICAgICAgdXBkYXRlZF90b2tlbnMucHVzaCh7CiAgICAgICAgbmFtZTogdmFyaWFibGUsCiAgICAgICAgdmFsdWU6IEl0ZW12YWx1ZUxlbmd0aCwKICAgICAgICBpZGVudGlmaWVyOiBpLAogICAgICAgIHR5cGU6ICdDYWxMZW5ndGgnCiAgICAgIH0pOwogICAgfSAvL3RoaXMgcnVucyBvbmx5IGZvciBvcGVyYXRpb25zIGxpa2UgeD1OdW1iZXJzW2FdCiAgICBlbHNlIGlmICh2YXJ2YWx1ZVR5cGUgPT0gJ0dldEFycmF5SW5kZXhWYWx1ZScpIHsKICAgICAgICB2YXIgbiA9IHVwZGF0ZWRfdG9rZW5zLmZpbmQoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgICByZXR1cm4gZWwubmFtZSA9PSB2YXJpYWJsZTsKICAgICAgICB9KTsKICAgICAgICB2YXIgaW5kZXggPSB1cGRhdGVkX3Rva2Vucy5pbmRleE9mKG4pOyAvL0l0ZXJhdG9yIGlzIHVzZWQgb25seSB3aGVuIHdlIGFyZSBsb29waW5nIG92ZXIgcHJvdmlkZWQgaW5kZXggbm90IGZvciB0aGUgaW5kZXggdGhhdCBuZWVkcyB0byBiZSBjYWxjdWxhdGVkCgogICAgICAgIHZhciBlbGVtZW50ID0gdmFydmFsdWUucmVwbGFjZSgnXScsICcnKTsKCiAgICAgICAgaWYgKGVsZW1lbnQuaW5jbHVkZXMoJysnKSkgewogICAgICAgICAgdmFyIFNwbGl0ID0gZWxlbWVudC5zcGxpdCgnKycpOwogICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudC5pbmNsdWRlcygnLScpKSB7CiAgICAgICAgICB2YXIgU3BsaXQgPSBlbGVtZW50LnNwbGl0KCctJyk7CiAgICAgICAgfQoKICAgICAgICB2YXIgZmxhZyA9IGZhbHNlOyAvL0ZvciBvcGVyYXRpb25zIGxpa2UgTmFtZT1OYW1lKyBBcnJheVtpXQoKICAgICAgICBpZiAoZWxlbWVudC5pbmNsdWRlcygnKycpIHx8IGVsZW1lbnQuaW5jbHVkZXMoJy0nKSAmJiAhU3BsaXRbMF0uaW5jbHVkZXMoJ1snKSkgewogICAgICAgICAgZmxhZyA9IHRydWU7CgogICAgICAgICAgdmFyIF90b2tlbjIgPSB1cGRhdGVkX3Rva2Vucy5maW5kKGZ1bmN0aW9uIChlbCkgewogICAgICAgICAgICByZXR1cm4gZWwubmFtZSA9PSBTcGxpdFswXTsKICAgICAgICAgIH0pOwoKICAgICAgICAgIHZhciBfaW5kZXggPSB1cGRhdGVkX3Rva2Vucy5pbmRleE9mKF90b2tlbjIpOwoKICAgICAgICAgIHZhciBBcnJheUl0ZW0gPSBTcGxpdFsxXS5zcGxpdCgnWycpOwogICAgICAgICAgdmFyIG91dHB1dCA9IENhbGN1bGF0ZVZhbHVlcyhBcnJheUl0ZW1bMV0sIGksIHVwZGF0ZWRfdG9rZW5zKTsKCiAgICAgICAgICB2YXIgX0FycmF5RWxlbWVudCA9IFNwbGl0YW5kSm9pbihBcnJheUl0ZW0sIG91dHB1dCwgZWxlbWVudCk7IC8vR2V0IE51bWJlcnNbM10gdmFsdWUgYW5kIG5vdyBzZXQgaXQgdG8gb3VyIHZhcmlhYmxlIHgKCgogICAgICAgICAgdmFyIF92YWx1ZTQgPSBHZXRBcnJheW9yU3RyaW5nRWxlbWVudChfQXJyYXlFbGVtZW50LCB1cGRhdGVkX3Rva2Vucyk7CgogICAgICAgICAgQWNjdW11bGF0ZVZhbHVlICs9IF92YWx1ZTQ7CiAgICAgICAgICB1cGRhdGVkX3Rva2Vuc1tfaW5kZXhdLnZhbHVlID0gQWNjdW11bGF0ZVZhbHVlOwogICAgICAgICAgRmluYWxWYWx1ZSA9IEFjY3VtdWxhdGVWYWx1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFyIFNwbGl0ID0gZWxlbWVudC5zcGxpdCgnWycpOwogICAgICAgIH0gLy9mb3Igb3BlcmF0aW9ucyBsaWtlIHg9IEFycmF5W2krMV0gZXRjCgoKICAgICAgICBpZiAoKFNwbGl0WzFdLmluY2x1ZGVzKCctJykgfHwgU3BsaXRbMV0uaW5jbHVkZXMoJysnKSkgJiYgIVNwbGl0WzFdLmluY2x1ZGVzKCdbJykpIHsKICAgICAgICAgIHZhciBfb3V0cHV0ID0gQ2FsY3VsYXRlVmFsdWVzKFNwbGl0WzFdLCBpLCB1cGRhdGVkX3Rva2Vucyk7CgogICAgICAgICAgZWxlbWVudCA9IFNwbGl0YW5kSm9pbihTcGxpdCwgX291dHB1dCwgZWxlbWVudCk7CiAgICAgICAgfQoKICAgICAgICB2YXIgdG9rZW4gPSB1cGRhdGVkX3Rva2Vucy5maW5kKGZ1bmN0aW9uIChlbCkgewogICAgICAgICAgcmV0dXJuIGVsLm5hbWUgPT0gU3BsaXRbMV07CiAgICAgICAgfSk7IC8vZm9yIG9wZXJhdGlvbnMgbGlrZSBBcnJheVtBZ2VdLiBIZXJlIGluZGV4IGlzIGFuIGFscmVhZHkgZGVmaW5lZCB2YXJpYWJsZQoKICAgICAgICBpZiAodG9rZW4gIT0gdW5kZWZpbmVkICYmIE9yaWdpbmFsSXRlcmF0b3IgIT0gU3BsaXRbMV0gJiYgdG9rZW4ubmFtZSAhPSAnJykgewogICAgICAgICAgZWxlbWVudCA9IFNwbGl0YW5kSm9pbihTcGxpdCwgdG9rZW4udmFsdWUsIGVsZW1lbnQpOwogICAgICAgIH0gLy9mb3Igb3BlcmF0aW9ucyBsaWtlIEFycmF5W2ldOiBMb29waW5nIG92ZXIgb3JpZ2luYWwgaW5kZXggdmFsdWUKICAgICAgICBlbHNlIGlmIChPcmlnaW5hbEl0ZXJhdG9yID09IFNwbGl0WzFdKSB7CiAgICAgICAgICAgIGVsZW1lbnQgPSBTcGxpdGFuZEpvaW4oU3BsaXQsIGl0ZXJhdG9yLCBlbGVtZW50KTsKICAgICAgICAgIH0KCiAgICAgICAgdmFyIEFycmF5RWxlbWVudCA9IGVsZW1lbnQ7IC8vR2V0IE51bWJlcnNbM10gdmFsdWUgYW5kIG5vdyBzZXQgaXQgdG8gb3VyIHZhcmlhYmxlIHgKCiAgICAgICAgdmFyIHZhbHVlID0gR2V0QXJyYXlvclN0cmluZ0VsZW1lbnQoQXJyYXlFbGVtZW50LCB1cGRhdGVkX3Rva2Vucyk7IC8vCgogICAgICAgIGlmICh2YWx1ZSAhPSB1bmRlZmluZWQpIHsKICAgICAgICAgIHZhbHVlID0gUmVtb3ZlUXVvdGVzKHZhbHVlKTsKICAgICAgICB9IC8vCgoKICAgICAgICBpZiAobiAhPSB1bmRlZmluZWQgJiYgZmxhZyA9PSBmYWxzZSkgewogICAgICAgICAgdXBkYXRlZF90b2tlbnNbaW5kZXhdLnZhbHVlID0gdmFsdWU7CiAgICAgICAgICBGaW5hbFZhbHVlID0gdmFsdWU7CiAgICAgICAgfSBlbHNlIGlmIChmbGFnID09IGZhbHNlKSB7CiAgICAgICAgICB1cGRhdGVkX3Rva2Vucy5wdXNoKHsKICAgICAgICAgICAgbmFtZTogdmFyaWFibGUsCiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgICAgICAgaWRlbnRpZmllcjogaSwKICAgICAgICAgICAgdHlwZTogc291cmNlZGF0YVtpICsgMV0udHlwZQogICAgICAgICAgfSk7CiAgICAgICAgICBGaW5hbFZhbHVlID0gdmFsdWU7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vaWYgd2UgYXJlIHNldHRpbmcgYWxyZWFkeSBkZWZpbmVkIHZhbHVlIHRvIG5ldyB2YXJpYWJsZQogICAgICAgIHZhciBtID0gdXBkYXRlZF90b2tlbnMuZmluZChmdW5jdGlvbiAoZWwpIHsKICAgICAgICAgIHJldHVybiBlbC5uYW1lID09IHZhcnZhbHVlOwogICAgICAgIH0pOwoKICAgICAgICBpZiAobSAhPSB1bmRlZmluZWQpIHsKICAgICAgICAgIHZhcnZhbHVlID0gbS52YWx1ZTsKICAgICAgICAgIEZpbmFsVmFsdWUgPSB2YXJ2YWx1ZTsKICAgICAgICB9CgogICAgICAgIHZhciBfbiA9IHVwZGF0ZWRfdG9rZW5zLmZpbmQoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgICByZXR1cm4gZWwubmFtZSA9PSB2YXJpYWJsZTsKICAgICAgICB9KTsKCiAgICAgICAgaWYgKF9uID09IHVuZGVmaW5lZCkgewogICAgICAgICAgLy90byBjaGVjayBpZiB0aGUgYXNzaWduZWQgdmFsdWUgbmVlZHMgdG8gYmUgY2FsY3VsYXRlZC4gdGhpcyBpcyBmdXRoZXIgZGl2ZWRlZCBpbiB0d28gdHlwZXMKICAgICAgICAgIGlmIChpc0NhbGN1bGF0aW9uKHZhcnZhbHVlKSkgewogICAgICAgICAgICAvL3R5cGUgMS0gQWdlPSAyMDIwLTIwMDAKICAgICAgICAgICAgaWYgKGlzUHVyZUV2YWwodmFydmFsdWUpKSB7CiAgICAgICAgICAgICAgdmFyIF92YWx1ZTUgPSBldmFsKHZhcnZhbHVlKTsgLy93cml0ZSBmdW5jdGlvbiBmb3IgdGhpcywgc28gcmVwZWF0YWJsZQoKCiAgICAgICAgICAgICAgdXBkYXRlZF90b2tlbnMucHVzaCh7CiAgICAgICAgICAgICAgICBuYW1lOiB2YXJpYWJsZSwKICAgICAgICAgICAgICAgIHZhbHVlOiBfdmFsdWU1LAogICAgICAgICAgICAgICAgaWRlbnRpZmllcjogaSwKICAgICAgICAgICAgICAgIHR5cGU6IHNvdXJjZWRhdGFbaSArIDFdLnR5cGUKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBGaW5hbFZhbHVlID0gX3ZhbHVlNTsKICAgICAgICAgICAgfSAvL3R5cGUgMi0gWD0gYWdlb25lK2FnZXR3bwogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIC8vcGVyZm9ybWluZyB0aGUgY2FsY3VsYXRpb24KICAgICAgICAgICAgICAgIHZhciBtdWx0aUNhbCA9IHNvdXJjZWRhdGFbaSArIDFdLm11bHRpQ2FsOwoKICAgICAgICAgICAgICAgIHZhciBfdmFsdWU2ID0gQ2FsY3VsYXRlVmFsdWVzKHZhcnZhbHVlLCBpLCB1cGRhdGVkX3Rva2VucywgbXVsdGlDYWwpOwoKICAgICAgICAgICAgICAgIHVwZGF0ZWRfdG9rZW5zLnB1c2goewogICAgICAgICAgICAgICAgICBuYW1lOiB2YXJpYWJsZSwKICAgICAgICAgICAgICAgICAgdmFsdWU6IF92YWx1ZTYsCiAgICAgICAgICAgICAgICAgIGlkZW50aWZpZXI6IGksCiAgICAgICAgICAgICAgICAgIHR5cGU6IHNvdXJjZWRhdGFbaSArIDFdLnR5cGUKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgRmluYWxWYWx1ZSA9IF92YWx1ZTY7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfSAvL2lmIHRoZXJlIGlzIG5vIG5lZWQgdG8gY2FsY3VsYXRlLCBwdXNoIHZhbHVlcyBhcyBpdCBpcwogICAgICAgICAgZWxzZSBpZiAoIWlzQ2FsY3VsYXRpb24odmFydmFsdWUpKSB7CiAgICAgICAgICAgICAgdXBkYXRlZF90b2tlbnMucHVzaCh7CiAgICAgICAgICAgICAgICBuYW1lOiB2YXJpYWJsZSwKICAgICAgICAgICAgICAgIHZhbHVlOiB2YXJ2YWx1ZSwKICAgICAgICAgICAgICAgIGlkZW50aWZpZXI6IGksCiAgICAgICAgICAgICAgICB0eXBlOiBzb3VyY2VkYXRhW2kgKyAxXS50eXBlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgRmluYWxWYWx1ZSA9IHZhcnZhbHVlOwogICAgICAgICAgICB9CiAgICAgICAgfSAvL2lmIGl0J3MgYWxyZWFkeSBhc3NnaW5lZCwgcmVhc3NpZ24gaXQgd2l0aCB1cGRhdGVkIHZhbHVlCiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHZhcnZhbHVlID0gdmFydmFsdWUudG9TdHJpbmcoKTsKCiAgICAgICAgICAgIGlmICh2YXJ2YWx1ZS5pbmNsdWRlcygnLScpIHx8IHZhcnZhbHVlLmluY2x1ZGVzKCclJykgfHwgdmFydmFsdWUuaW5jbHVkZXMoJysnKSB8fCB2YXJ2YWx1ZS5pbmNsdWRlcygnLycpIHx8IHZhcnZhbHVlLmluY2x1ZGVzKCcqJykpIHsKICAgICAgICAgICAgICAvLwogICAgICAgICAgICAgIHZhciBOZXdWYWx1ZSA9IENhbGN1bGF0ZVZhbHVlcyh2YXJ2YWx1ZSwgaSwgdXBkYXRlZF90b2tlbnMpOwogICAgICAgICAgICAgIF9uLnZhbHVlID0gTmV3VmFsdWU7CiAgICAgICAgICAgICAgRmluYWxWYWx1ZSA9IE5ld1ZhbHVlOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHZhciBfaW5kZXgyID0gdXBkYXRlZF90b2tlbnMuaW5kZXhPZihfbik7CgogICAgICAgICAgICAgIHVwZGF0ZWRfdG9rZW5zW19pbmRleDJdLnZhbHVlID0gdmFydmFsdWU7CiAgICAgICAgICAgICAgRmluYWxWYWx1ZSA9IHZhcnZhbHVlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgIH0gLy8gY29uc29sZS5sb2coJ3ZhcmlhYmxlLCB2YXJ2YWx1ZSA6ICcsIHZhcmlhYmxlLCBGaW5hbFZhbHVlICk7CgoKICB2YXIgbWVzc2FnZSA9ICcnOwoKICBpZiAoaXNDYWxjdWxhdGlvbihzb3VyY2VkYXRhW2kgKyAxXS52YWx1ZSkgfHwgc291cmNlZGF0YVtpICsgMV0udmFsdWUuaW5jbHVkZXMoJ+CkuOCkguCkluCljeCkr+CkvicpKSB7CiAgICBtZXNzYWdlID0gJyBDb21wdXRlciDgpLjgpKzgpLjgpYcg4KSq4KS54KSy4KWHIOCknOCkvuCkgeCkmiDgpJXgpLDgpKTgpL4g4KS54KWIIOCkleClgCDgpJXgpY3gpK/gpL4sICcgKyAnIicgKyBzb3VyY2VkYXRhW2kgKyAxXS52YWx1ZSArICciJyArICcg4KSV4KWLIOCkuOClgeCksuCkneCkvuCkqOClhyhTb2x2ZSkg4KSV4KSw4KSo4KWHIOCkleClgCDgpZvgpLDgpYHgpLDgpKQg4KS54KWIPycgKyAnXG4nICsgJyDgpIXgpJfgpLAg4KS54KS+LCDgpKTgpYsgQ29tcHV0ZXIgJyArICciJyArIHNvdXJjZWRhdGFbaSArIDFdLnZhbHVlICsgJyInICsgJyDgpJXgpYsgU29sdmUg4KSV4KSw4KSV4KWHLCAnICsgJyInICsgdmFyaWFibGUgKyAnIicgKyAnIOCkleClhyDgpKjgpL7gpK4g4KS44KWHIE1lbW9yeSDgpK7gpYfgpIIg4KSm4KSw4KWN4KScKFN0b3JlKeCkleCksCDgpKbgpYfgpJfgpL4gfCAnICsgJ1xuJyArICcg4KSv4KS54KS+4KSq4KSwICwgJyArICciJyArIHNvdXJjZWRhdGFbaSArIDFdLnZhbHVlICsgJyInICsgJyDgpJXgpYAg4KSV4KWA4KSu4KSkIChWYWx1ZSkgLCAnICsgJyInICsgRmluYWxWYWx1ZSArICciJyArICcg4KSG4KSk4KWAIOCkueCliCB8JyArICdcbicgKyAnIOCkh+CkuOCksuCkv+CkjywgQ29tcHV0ZXIgJyArICciJyArIHZhcmlhYmxlICsgJyInICsgJyDgpJXgpYsgJyArICciJyArIEZpbmFsVmFsdWUgKyAnIicgKyAnIOCkr+ClhyBWQUxVRSDgpKbgpYcg4KSV4KSwIOCkheCkquCkqOClhyBNZW1vcnkg4KSu4KWH4KSCIOCkpuCksOCljeCknChTdG9yZSkg4KSV4KSwIOCkpuClh+CkpOCkviDgpLngpYggfCc7CiAgfSBlbHNlIHsKICAgIG1lc3NhZ2UgPSAnIENvbXB1dGVyIOCkqOClhywgJyArICciJyArIHZhcmlhYmxlICsgJyInICsgJyDgpJXgpYssICcgKyAnIicgKyB2YXJ2YWx1ZSArICciJyArICcg4KSv4KWHIFZBTFVFIOCkpuClhyDgpJXgpLAg4KSF4KSq4KSo4KWHIE1lbW9yeSDgpK7gpYfgpIIg4KSm4KSw4KWN4KScKFN0b3JlKSDgpJXgpLDgpLXgpL7gpK/gpL4g4KS54KWIIHwnOwogIH0gLy9UaGlzIGlzIHRoZSBleHBlcmVzc2lvbiB3aGNpaCBpcyBnZXR0aW5nIGV2YWx1YXRlZC4KCgogIHZhciBleHByZXNzaW9uID0gdmFyaWFibGUgKyAnPScgKyB2YXJ2YWx1ZTsgLy8gY29uc29sZS5sb2codXBkYXRlZF90b2tlbnMpOwoKICBleHByZXNzaW9uID0gR2V0Y2xlYW5lZEV4cHJlc3Npb24oZXhwcmVzc2lvbik7CiAgTGluZWJ5bGluZVNvdXJjZWRhdGEuZm9yRWFjaChmdW5jdGlvbiAoZWwsIGluZGV4KSB7CiAgICBlbCA9IGVsLnJlcGxhY2UoLyAvLCAnJyk7CiAgICBlbCA9IEdldGNsZWFuZWRFeHByZXNzaW9uKGVsKTsKCiAgICBpZiAoZWwgPT0gZXhwcmVzc2lvbikgewogICAgICBBZGR0b0V4ZWN1dGlvblN0YWNrKEV4ZWN1dGlvblN0YWNrLCAnPScsICfgpJXgpL/gpLjgpYAgVkFSSUFCTEUg4KSV4KWLIOCkqOCkiCBWQUxVRSDgpLjgpYfgpJ8g4KSV4KSw4KSo4KS+ICAgJywgdmFyaWFibGUsIHZhcnZhbHVlLCBtZXNzYWdlLCBpbmRleCArIDEpOwogICAgfQogIH0pOwp9IC8vR2V0Q29uZGl0aW9uVmFsdWUgaXMgb3VyIGdvdG8gZnVuY3Rpb24gdG8gZXZhbHVhdGUgYSBjb25kaXRpb24gdG8gdHJ1ZSBvciBmYWxzZQoKCmZ1bmN0aW9uIEdldENvbmRpdGlvblZhbHVlKGVsZW1lbnQsIHVwZGF0ZWRfdG9rZW5zKSB7CiAgdmFyIENvbmRpdGlvblZhbHVlID0gZmFsc2U7CgogIGlmIChlbGVtZW50LmluY2x1ZGVzKCcmJicpIHx8IGVsZW1lbnQuaW5jbHVkZXMoJ3x8JykpIHsKICAgIHZhciBNdWx0Q29uZGl0aW9uc0NvdW50ID0gcGFyc2VJbnQoQ291bnQoJyYnLCBlbGVtZW50KSkgKyBwYXJzZUludChDb3VudCgnfCcsIGVsZW1lbnQpKTsgLy90aGlzIHdpbGwgYmUgb3VyIGZpbmFsIHZhbHVlcwogICAgLy9jb252ZXJ0ZWQgYXMgdHJ1ZSYmZmFsc2UmJnRydWV8fHRydWUKCiAgICB2YXIgQnVpbHRNdWx0Q29uZGl0b25XaXRoVmFsdWVzID0gJyc7CiAgICB2YXIgTGFzdFJlc3VsdCA9IHt9OyAvL3J1bm5pbmcgZm9yIGxvb3Agb24gb3JpZ2luYWwgY29uZGl0aW9uIHRvIGNhbGN1bGF0ZXMgZWFjaCBpbmRpdmlkdWFsIGNvbmRpdGlvbiBhbmQgYWRkaW5nIGl0cyB2YWx1ZSBpbiBCdWlsdE11bHRDb25kaXRvbldpdGhWYWx1ZXMKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8PSBNdWx0Q29uZGl0aW9uc0NvdW50OyBpKyspIHsKICAgICAgaWYgKGkgPT0gTXVsdENvbmRpdGlvbnNDb3VudCkgewogICAgICAgIHZhciBjb25kaXRpb24gPSBMYXN0UmVzdWx0LlN3ZWVwZWRFbGVtZW50OwogICAgICAgIGNvbmRpdGlvbiA9IGNvbmRpdGlvbi5yZXBsYWNlKC8gL2csICcnKTsKICAgICAgICB2YXIgU3BsaXRBcnJheSA9IFNwbGl0RWxlbWVudHNBcnJheShjb25kaXRpb24pOwogICAgICAgIHZhciBWYWx1ZXMgPSBTZXRWYWx1ZXMoU3BsaXRBcnJheSwgdXBkYXRlZF90b2tlbnMpOwogICAgICAgIENvbmRpdGlvblZhbHVlID0gVXBkYXRlVXBkYXRlZF90b2tlbnN3aXRoVmFsdWVzKFZhbHVlcyk7CiAgICAgICAgQnVpbHRNdWx0Q29uZGl0b25XaXRoVmFsdWVzID0gQnVpbHRNdWx0Q29uZGl0b25XaXRoVmFsdWVzICsgQ29uZGl0aW9uVmFsdWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIHJlc3VsdCA9IGhhbmRsZW11bHRDb25kaXRpb25zKGVsZW1lbnQpOwogICAgICAgIExhc3RSZXN1bHQgPSByZXN1bHQ7CiAgICAgICAgZWxlbWVudCA9IHJlc3VsdC5Td2VlcGVkRWxlbWVudDsKICAgICAgICB2YXIgX2NvbmRpdGlvbiA9IHJlc3VsdC5jb25kaXRpb247CiAgICAgICAgX2NvbmRpdGlvbiA9IF9jb25kaXRpb24ucmVwbGFjZSgvIC9nLCAnJyk7CgogICAgICAgIHZhciBfU3BsaXRBcnJheSA9IFNwbGl0RWxlbWVudHNBcnJheShfY29uZGl0aW9uKTsKCiAgICAgICAgdmFyIF9WYWx1ZXMgPSBTZXRWYWx1ZXMoX1NwbGl0QXJyYXksIHVwZGF0ZWRfdG9rZW5zKTsKCiAgICAgICAgQ29uZGl0aW9uVmFsdWUgPSBVcGRhdGVVcGRhdGVkX3Rva2Vuc3dpdGhWYWx1ZXMoX1ZhbHVlcyk7CiAgICAgICAgQnVpbHRNdWx0Q29uZGl0b25XaXRoVmFsdWVzID0gQnVpbHRNdWx0Q29uZGl0b25XaXRoVmFsdWVzICsgQ29uZGl0aW9uVmFsdWUgKyByZXN1bHQub3BlcmF0b3I7CiAgICAgIH0KICAgIH0gLy9zZXR0aW5nIHRoZSBmaW5hbCBjb25kaXRpb24gdmFsdWUgaW4gY2FzZXMgbGlrZSDgpIXgpJfgpLAgKGFnZW9uZT09MTAgJiYgQXZlcmFnZUFnZTwxMDAwICYmIGFnZXR3bz4xMDAgfHwgYWdlb25lPT0xMCkKCgogICAgQ29uZGl0aW9uVmFsdWUgPSBldmFsKEJ1aWx0TXVsdENvbmRpdG9uV2l0aFZhbHVlcyk7CiAgfSBlbHNlIHsKICAgIC8vbGV0IHRva2VuPSB1cGRhdGVkX3Rva2Vucy5maW5kKGVsPT4gZWwub3JpZ2luYWx2YWx1ZT09bXV0YWJsZV90b2tlbnNbal0udmFsdWUpCiAgICB2YXIgX1NwbGl0QXJyYXkyID0gU3BsaXRFbGVtZW50c0FycmF5KGVsZW1lbnQpOyAvLyBjb25zb2xlLmxvZygnU3BsaXRBcnJheTogJywgU3BsaXRBcnJheSk7CgoKICAgIHZhciBfVmFsdWVzMiA9IFNldFZhbHVlcyhfU3BsaXRBcnJheTIsIHVwZGF0ZWRfdG9rZW5zKTsKCiAgICBfVmFsdWVzMiA9IF9WYWx1ZXMyLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICByZXR1cm4gaXRlbSAhPT0gJycgJiYgaXRlbSAhPSAnXCcnICYmIGl0ZW0gIT0gJz1cJycgJiYgaXRlbSAhPSAnIic7CiAgICB9KTsgLy9TZXR0aW5nIHRoZSBmaW5hbCBjb25kaXRpb24gdmFsdWUgaW4gY2FzZXMgbGlrZSDgpIXgpJfgpLAgKGFnZW9uZT09MTApCiAgICAvL2NvbnNvbGUubG9nKCdWYWx1ZXM6ICcsIFZhbHVlcyk7CgogICAgQ29uZGl0aW9uVmFsdWUgPSBVcGRhdGVVcGRhdGVkX3Rva2Vuc3dpdGhWYWx1ZXMoX1ZhbHVlczIpOwogIH0KCiAgcmV0dXJuIENvbmRpdGlvblZhbHVlOwp9IC8vR2V0dGluZyBldmVyeSBzaW5nbGUgaW5mb3JtYXRpb24gYWJvdXQgb3VyIGZvcmxvb3AKCgpmdW5jdGlvbiBGb3JMb29wU2V0TWV0YWRhdGEodG9rZW5zLCBpLCB1cGRhdGVkX3Rva2VucykgewogIHZhciBGb3JMb29wTWV0YURhdGEgPSB0b2tlbnNbaSArIDFdOyAvL1NwbGl0dGluZyB0aGUgRm9yTG9vcE1ldGFEYXRhIHZhbHVlcyBpbmRpdmlkdWFsbHkKCiAgdmFyIGl0ZXJhdG9yID0gRm9yTG9vcE1ldGFEYXRhLml0ZXJhdG9yOwogIHZhciBlbGVtZW50ID0gRm9yTG9vcE1ldGFEYXRhLnZhbHVlOwogIHZhciBJdGVyYXRpb25TdGFydCA9IHBhcnNlSW50KEZvckxvb3BNZXRhRGF0YS5pdGVyYXRpb25TdGFydCk7CiAgdmFyIEl0ZXJhdGlvbkVuZCA9IHBhcnNlSW50KEZvckxvb3BNZXRhRGF0YS5pdGVyYXRpb25FbmQpOyAvL3B1c2hpbmcgaW5kZXgKICAvL2NoZWNraW5nIGlmIGl0ZXJhdGlvbiBlbmQgaXMgYW4gcHJlZGVmaW5lZCB2YXJpYWJsZQoKICB2YXIgdG9rZW4gPSB1cGRhdGVkX3Rva2Vucy5maW5kKGZ1bmN0aW9uIChlbCkgewogICAgcmV0dXJuIGVsLm5hbWUgPT0gRm9yTG9vcE1ldGFEYXRhLml0ZXJhdGlvbkVuZDsKICB9KTsKCiAgaWYgKHRva2VuICE9IHVuZGVmaW5lZCkgewogICAgSXRlcmF0aW9uRW5kID0gcGFyc2VJbnQodG9rZW4udmFsdWUpOwogIH0gLy8gdmFyIEZvckxvb3BTb3VyY2VkYXRhID0gRm9yTG9vcE1ldGFEYXRhLkZvckxvb3BTb3VyY2VkYXRhCgoKICB2YXIgZWxlbWVudFZhbHVlID0gdXBkYXRlZF90b2tlbnMuZmluZChmdW5jdGlvbiAoZWwpIHsKICAgIHJldHVybiBlbC5uYW1lID09IGVsZW1lbnQ7CiAgfSk7CiAgdmFyIGVsZW1lbnRMZW5ndGggPSAwOwogIHZhciBGb3JMb29wU291cmNlZGF0YUluZGV4U3RhcnQgPSAwOwogIHZhciBPcmlnaW5hbEl0ZXJhdG9yID0gRm9yTG9vcE1ldGFEYXRhLml0ZXJhdG9yOyAvLyBSdW4gaWYgc3RhcnQgYW5kIGVuZCBwYXJhbWV0ZXJzIGFyZSBub3QgZ2l2ZW4gZS5nIOCkpuClgeCkueCksOCkvuCkkyBhIOCkleCliyAgTmFtZSDgpK7gpYcKICAvLyBUaGlzIGlzIHJhbiBqdXN0IHRvIGdldCBTdGFydCBhbmQgRW5kIHBhcmFtZXRlcnMgYXMgdGhleSBhcmUgbm90IHByb3ZpZGVkCgogIGlmIChGb3JMb29wTWV0YURhdGEuaXRlcmF0aW9uRW5kID09IHVuZGVmaW5lZCkgewogICAgLy9ydW4gaWYgZWxlbWVudCBpcyBhcnJheQogICAgaWYgKGVsZW1lbnRWYWx1ZS50eXBlID09ICdBcnJheScpIHsKICAgICAgZWxlbWVudExlbmd0aCA9IGVsZW1lbnRWYWx1ZS52YWx1ZS5zcGxpdCgnLCcpLmxlbmd0aDsKICAgICAgSXRlcmF0aW9uU3RhcnQgPSAwOwogICAgICBJdGVyYXRpb25FbmQgPSBlbGVtZW50TGVuZ3RoIC0gMTsKICAgIH0gLy9ydW4gaWYgZWxlbWVudCBpcyBTdHJpbmcKICAgIGVsc2UgewogICAgICAgIGVsZW1lbnRMZW5ndGggPSBlbGVtZW50VmFsdWUudmFsdWUubGVuZ3RoOwogICAgICAgIEl0ZXJhdGlvblN0YXJ0ID0gMDsKICAgICAgICBJdGVyYXRpb25FbmQgPSBlbGVtZW50TGVuZ3RoIC0gMTsKICAgICAgfQogIH0KCiAgdmFyIEN5Y2xlID0gSXRlcmF0aW9uRW5kOwogIHJldHVybiB7CiAgICBGb3JMb29wU291cmNlZGF0YUluZGV4U3RhcnQ6IEZvckxvb3BTb3VyY2VkYXRhSW5kZXhTdGFydCwKICAgIEN5Y2xlOiBDeWNsZSwKICAgIE9yaWdpbmFsSXRlcmF0b3I6IE9yaWdpbmFsSXRlcmF0b3IsCiAgICBJdGVyYXRpb25TdGFydDogSXRlcmF0aW9uU3RhcnQsCiAgICBJdGVyYXRpb25FbmQ6IEl0ZXJhdGlvbkVuZCwKICAgIGl0ZXJhdG9yOiBpdGVyYXRvciwKICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICBlbGVtZW50VmFsdWU6IGVsZW1lbnRWYWx1ZQogIH07Cn0gLy9UbyByZXNvbHZlIG9wZXJhdGlvbnMgbGlrZSBBcnJheVthXT1hKzIgaW4gbG9vcHMgYW5kIGluIHBsYWluIGNvbnRleHQKCgpmdW5jdGlvbiBTZXRBcnJheUluZGV4VmFsdWUoU291cmNlRGF0YSwgaSwgaiwgQ29tcGxldGVUb2tlblZhbHVlTGlzdCwgdG9rZW5zLCBPcmlnaW5hbEl0ZXJhdG9yLCBpdGVyYXRvciwgRXhlY3V0aW9uU3RhY2ssIExpbmVieWxpbmVTb3VyY2VkYXRhKSB7CiAgdmFyIFZhbHVlID0gU291cmNlRGF0YVtpXS52YWx1ZTsKICB2YXIgVmFsdWVUb1NldCA9IFNvdXJjZURhdGFbaV0uVmFsdWVUb1NldDsKICB2YXIgT3JpZ2luYWxFbGVtZW50ID0gVmFsdWUgKyAnPScgKyBWYWx1ZVRvU2V0OwogIHZhciBlbGVtZW50ID0gUmVtb3ZlQnJhY2tldHMoVmFsdWUpOwogIHZhciBBcnJheUVsZW1lbnQgPSAnJzsgLy9TZXByYXRpbmcgb3V0IGluZGV4IGlkZW50aWZpZXIuIHh5eiBmcm9tIEFycmF5W3h5el0KCiAgZWxlbWVudCA9IGVsZW1lbnQucmVwbGFjZSgnXScsICcnKTsKICB2YXIgU3BsaXQgPSBlbGVtZW50LnNwbGl0KCdbJyk7IC8vIHJ1biBpZiB3ZSBuZWVkIHRvIHNldCBkaXJlY3QgQXJyYXkgZWxlbWVudCB2YWx1ZS4gbGlrZSBBcnJheVsyXT0geHl4CgogIGlmIChpc051bWJlcihTcGxpdFsxXSkpIHsKICAgIFNwbGl0ID0gU3BsaXQuam9pbignWycpOyAvLwoKICAgIFNwbGl0ID0gU3BsaXQgKyAnXSc7CiAgICBBcnJheUVsZW1lbnQgPSBTcGxpdDsgLy8KCiAgICBOZXdWYWx1ZVRvU2V0ID0gQ2FsY3VsYXRlVmFsdWVzKFZhbHVlVG9TZXQsIGosIENvbXBsZXRlVG9rZW5WYWx1ZUxpc3QpOwogICAgU2V0QXJyYXlvclN0cmluZ0VsZW1lbnQoT3JpZ2luYWxFbGVtZW50LCBBcnJheUVsZW1lbnQsIENvbXBsZXRlVG9rZW5WYWx1ZUxpc3QsIGZhbHNlLCBOZXdWYWx1ZVRvU2V0LCB0b2tlbnMsIEV4ZWN1dGlvblN0YWNrLCBMaW5lYnlsaW5lU291cmNlZGF0YSk7CiAgfSAvLyBydW4gaWYgd2UgbmVlZCB0byBkeW5hbWljYWxseSBzZXQgQXJyYXkgZWxlbWVudCB2YWx1ZS4gbGlrZSBBcnJheVtpXT0geHl4CiAgLy9DcmVhdGVBcnJheUVsZW1lbnQgZnVuY3Rpb24gd2lsbCBjcmVhdGUgZHluYW1pYyBBcnJheSB2YWx1ZXMuIGxpa2UgQXJyYXlbMF0sIEFycmF5WzFdIGV0Yy4KICBlbHNlIHsKICAgICAgdmFyIGluZGV4ID0gU3BsaXRbMV07IC8vIHNldHRpbmcgaXRlcmF0b3IgYXMgcGVyIHVzZXIgaW5wdXQKICAgICAgLy9mb3IgaXRlcmF0b3IgbGlrZSBjb3VudD1jb3VudCArIDEsIEFycmF5W2NvdW50XQoKICAgICAgdmFyIG5ld0ludGVyYXRvciA9IDA7CiAgICAgIHZhciB0b2tlbiA9IENvbXBsZXRlVG9rZW5WYWx1ZUxpc3QuZmluZChmdW5jdGlvbiAoZWwpIHsKICAgICAgICByZXR1cm4gZWwubmFtZSA9PSBpbmRleDsKICAgICAgfSk7CgogICAgICBpZiAodG9rZW4gIT0gdW5kZWZpbmVkKSB7CiAgICAgICAgbmV3SW50ZXJhdG9yID0gdG9rZW4udmFsdWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbmV3SW50ZXJhdG9yID0gaXRlcmF0b3I7CiAgICAgIH0KCiAgICAgIEFycmF5RWxlbWVudCA9IENyZWF0ZUFycmF5RWxlbWVudChWYWx1ZSwgbmV3SW50ZXJhdG9yKTsKICAgIH0gLy8gdGhpcyBjb2RlIGlzIHdyaXR0ZW4gdG8gZmluZCBvcGVyYXRpb25zIGxpa2UgQXJyYXlbYV09IGEqMTAwK2FnZSphLiBub3RpY2UgYQogIC8vZmluZCBhIHdheSB0byBzaW1wbGlmeSB0aGlzIGluIGxvbmcgdGVybQoKCiAgdmFyIGRhdGEgPSBWYWx1ZVRvU2V0OwogIGRhdGEgPSBkYXRhLnNwbGl0KCcqJykudG9TdHJpbmcoKTsKICBkYXRhID0gZGF0YS5zcGxpdCgnKycpLnRvU3RyaW5nKCk7CiAgZGF0YSA9IGRhdGEuc3BsaXQoJy0nKS50b1N0cmluZygpOwogIGRhdGEgPSBkYXRhLnNwbGl0KCcvJykudG9TdHJpbmcoKTsKICBkYXRhID0gZGF0YS5zcGxpdCgnLCcpOyAvL2J1aWxkaW5nIGEgbmV3IHZhbHVlIHRvIGNvbnZlcnQgYSoxMDArYWdlKmEgaW50byA1KjEwMCthZ2UqYSBhbmQgdGhlbiBzZW5kaW5nIGl0IHRvIENhbGN1bGF0ZVZhbHVlcygpCgogIHZhciBOZXdWYWx1ZVRvU2V0ID0gJyc7CgogIGlmIChkYXRhLmluY2x1ZGVzKFNwbGl0WzFdKSAmJiBkYXRhLmxlbmd0aCA+IDEpIHsKICAgIC8vd2UgaGF2ZSBvcGVyYXRpb25zIGxpa2UgQXJyYXlbYV09IGEqMTAwK2FnZSphLiBub3RpY2UgYQogICAgZm9yICh2YXIgbSA9IDA7IG0gPCBWYWx1ZVRvU2V0Lmxlbmd0aDsgbSsrKSB7CiAgICAgIGlmIChWYWx1ZVRvU2V0W21dID09IFNwbGl0WzFdICYmICEvXlthLXpdKyQvaS50ZXN0KFZhbHVlVG9TZXRbbSArIDFdKSkgewogICAgICAgIC8vIHZhbHVlIGlzIGJlZW4gc2V0IC4gcmVwbGFjaW5nIGluZGV4IHZhbHVlIGEgd2l0aCBpdGVhcnRvciB2YWx1ZSAwLDEsMiwgZXRjLgogICAgICAgIE5ld1ZhbHVlVG9TZXQgPSBOZXdWYWx1ZVRvU2V0ICsgaXRlcmF0b3I7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgTmV3VmFsdWVUb1NldCA9IE5ld1ZhbHVlVG9TZXQgKyBWYWx1ZVRvU2V0W21dOwogICAgICB9CiAgICB9CgogICAgdmFyIGl0ZXJhdCA9IGZhbHNlOyAvL2dhdmUgaXQgYSBkaWZmZXJlbnQgbmFtZSBzbyBpdCB3b3VsZCBub3QgZnVjayB1cCB3aXRoIGZvciBsb29wIGl0ZXJhdG9yCgogICAgTmV3VmFsdWVUb1NldCA9IENhbGN1bGF0ZVZhbHVlcyhOZXdWYWx1ZVRvU2V0LCBqLCBDb21wbGV0ZVRva2VuVmFsdWVMaXN0KTsKICAgIFNldEFycmF5b3JTdHJpbmdFbGVtZW50KE9yaWdpbmFsRWxlbWVudCwgQXJyYXlFbGVtZW50LCBDb21wbGV0ZVRva2VuVmFsdWVMaXN0LCBpdGVyYXQsIE5ld1ZhbHVlVG9TZXQsIHRva2VucywgRXhlY3V0aW9uU3RhY2ssIExpbmVieWxpbmVTb3VyY2VkYXRhKTsKICB9IC8vIHRoaXMgY29uZGl0aW9uIGVuYWJsZXMgcHJvZ3JhbSB0byBvbmx5IHJ1biAgQXJyYXlbYV09IHh5eiB3aGVuIGl0ZXJhdG9yIGlzIGEuIEl0IGRpc2FsbG93cyBydW5uaW5nIEFycmF5W2JsYWJsYWJsYV09eHl6CgoKICBpZiAoT3JpZ2luYWxJdGVyYXRvciA9PSBTcGxpdFsxXSkgewogICAgaWYgKFNwbGl0WzFdID09IFZhbHVlVG9TZXQpIHsKICAgICAgdmFyIF9pdGVyYXRvciA9IHRydWU7CiAgICAgIFNldEFycmF5b3JTdHJpbmdFbGVtZW50KE9yaWdpbmFsRWxlbWVudCwgQXJyYXlFbGVtZW50LCBDb21wbGV0ZVRva2VuVmFsdWVMaXN0LCBfaXRlcmF0b3IsIFZhbHVlVG9TZXQsIHRva2VucywgRXhlY3V0aW9uU3RhY2ssIExpbmVieWxpbmVTb3VyY2VkYXRhKTsKICAgIH0gLy8gZm9yIG9wZXJhdGlvbnMgbGlrZSBBcnJheVthXT1hZ2VvbmUqMTAwCgoKICAgIGlmICghZGF0YS5pbmNsdWRlcyhTcGxpdFsxXSkgJiYgT3JpZ2luYWxJdGVyYXRvciA9PSBTcGxpdFsxXSkgewogICAgICB2YXIgX2l0ZXJhdG9yMiA9IGZhbHNlOwogICAgICBWYWx1ZVRvU2V0ID0gQ2FsY3VsYXRlVmFsdWVzKFZhbHVlVG9TZXQsIGosIENvbXBsZXRlVG9rZW5WYWx1ZUxpc3QpOwogICAgICBTZXRBcnJheW9yU3RyaW5nRWxlbWVudChPcmlnaW5hbEVsZW1lbnQsIEFycmF5RWxlbWVudCwgQ29tcGxldGVUb2tlblZhbHVlTGlzdCwgX2l0ZXJhdG9yMiwgVmFsdWVUb1NldCwgdG9rZW5zLCBFeGVjdXRpb25TdGFjaywgTGluZWJ5bGluZVNvdXJjZWRhdGEpOwogICAgfQogIH0gLy9taWdodCBoYXZlIHRvIGFkZCBtb3JlIGNvbmRpdGlvbnMgaW4gdGhlIGZ1dHVyZQogIGVsc2UgewogICAgICB2YXIgX2l0ZXJhdG9yMyA9IGZhbHNlOwogICAgICBWYWx1ZVRvU2V0ID0gQ2FsY3VsYXRlVmFsdWVzKFZhbHVlVG9TZXQsIGosIENvbXBsZXRlVG9rZW5WYWx1ZUxpc3QpOwogICAgICBTZXRBcnJheW9yU3RyaW5nRWxlbWVudChPcmlnaW5hbEVsZW1lbnQsIEFycmF5RWxlbWVudCwgQ29tcGxldGVUb2tlblZhbHVlTGlzdCwgX2l0ZXJhdG9yMywgVmFsdWVUb1NldCwgdG9rZW5zLCBFeGVjdXRpb25TdGFjaywgTGluZWJ5bGluZVNvdXJjZWRhdGEpOwogICAgfQp9CgpmdW5jdGlvbiBBZGR0b0V4ZWN1dGlvblN0YWNrKHN0YWNrLCBrZXl3b3JkLCBrZXl3b3JkVXNlLCB2YXJpYWJsZSwgdmFsdWUsIG1lc3NhZ2UsIExpbmVudW1iZXIpIHsKICBzdGFjay5wdXNoKHsKICAgIGtleXdvcmQ6IGtleXdvcmQsCiAgICBrZXl3b3JkVXNlOiBrZXl3b3JkVXNlLAogICAgdmFyaWFibGU6IHZhcmlhYmxlLAogICAgdmFsdWU6IHZhbHVlLAogICAgbWVzc2FnZTogbWVzc2FnZSwKICAgIExpbmVudW1iZXI6IExpbmVudW1iZXIKICB9KTsKfQoKZXhwb3J0IHsgSXNSZXNlcnZlZEtleXdvcmQsIEdldENsZWFuU291cmNlZGF0YSwgR2V0Y2xlYW5lZEV4cHJlc3Npb24sIEZvckxvb3BTZXRNZXRhZGF0YSwgZ2V0TG9vcEluZGV4U3RhcnQsIEFkZEVsZW1lbnRUb0FycmF5LCBSZXNldFZhbHVlLCBIYW5kbGVCbG9ja3MsIEhhbmRsZUNvbmRpdGlvbnMsIEFzc2lnbm9yVXBkYXRlVmFsdWVzLCBQdXNoR2V0QXJyYXlJbmRleFZhbHVlLCBQdXNoU2V0QXJyYXlJbmRleFZhbHVlLCBpc0FycmF5T3BlcmF0aW9uLCBHZXRDb25kaXRpb25WYWx1ZSwgQ2FsY3VsYXRlVmFsdWVzLCBoYW5kbGVtdWx0Q29uZGl0aW9ucywgQ3JlYXRlQXJyYXlFbGVtZW50LCBTZXRBcnJheW9yU3RyaW5nRWxlbWVudCwgRm9yTG9vcEFycmF5b3JTdHJpbmdPdXRwdXQsIEdldEFycmF5b3JTdHJpbmdFbGVtZW50LCBBY2NlcHRJbnB1dGFuZFNldFZhbHVlLCBTcGxpdEVsZW1lbnRzQXJyYXksIFNldFZhbHVlcywgVXBkYXRlVXBkYXRlZF90b2tlbnN3aXRoVmFsdWVzLCBTZXRBcnJheUluZGV4VmFsdWUsIEFkZHRvRXhlY3V0aW9uU3RhY2sgfTs="},{"version":3,"sources":["/Users/jonny/Desktop/myProjects/Kalaam-core/Scripts/main.js"],"names":["SourceDataReplaceforEasyParsing","ActiveLangugaeKeywords","RemoveQuotes","RemoveBrackets","Count","IsSpecialChar","v","i","IsConditionalOperator","e","includes","IsReservedKeyword","Print","If","isPureEval","element","test","isCalculation","isNumber","charAt","length","isArrayOperation","GetCleanSourcedata","sourcedata","cleaned_sourcedata","impurities","forEach","indexOf","push","elements","split","index","filter","item","GetcleanedExpression","expression","replace","SplitElementsArray","multiCal","StringVar","StrVar","j","flag","getLoopIndexStart","mutable_tokens","check","setIndex","value","handlemultConditions","condition","substring","SweepedElement","operator","AddElementToArray","Sourcedata","updated_tokens","ExecutionStack","LinebylineSourcedata","token","Split","Array","ElementtoPush","find","el","name","ArrayEl","ArrayValue","indexofArray","message","Linenumber","AddtoExecutionStack","AcceptInputandSetValue","tokens","SetInputValueAs","AcceptAs","prompt","CalculateValues","calculation","result","calculationArray","SetValues","joinStringVar","join","NewStringVar","eval","toString","PushSetArrayIndexValue","data","type","ValueToSet","PushGetArrayIndexValue","CreateArrayElement","Value","iterator","ArrayElement","SetArrayorStringElement","OriginalElement","NewValue","variable","indexCollected","Element","GetArrayorStringElement","undefined","ForLoopArrayorStringOutput","elementValue","global","CurrentElement","FoundValue","output","console","log","ArrayElementValue","UpdateUpdated_tokenswithValues","payload","a","b","HandleBlocks","StoreResult","ArrayBrackets","x","pop","startIndex","EndIndex","HandleConditions","SplitArray","Values","ForLoopConditionValue","SplitandJoin","array","Joinarray","AccumulateValue","ResetValue","AssignorUpdateValues","OriginalIterator","varvalue","FinalValue","AssignmentError","keywords","error","varvalueType","findvalueinMemory","memory_value","checkifUndefined","mv","undefined_error","Itemvalue","ItemvalueLength","identifier","n","ArrayItem","m","GetConditionValue","ConditionValue","MultConditionsCount","parseInt","BuiltMultConditonWithValues","LastResult","ForLoopSetMetadata","ForLoopMetaData","IterationStart","iterationStart","IterationEnd","iterationEnd","elementLength","ForLoopSourcedataIndexStart","Cycle","SetArrayIndexValue","SourceData","CompleteTokenValueList","NewValueToSet","newInterator","iterat","stack","keyword","keywordUse"],"mappings":"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","sourcesContent":["import { SourceDataReplaceforEasyParsing, } from '../Scripts/DataCleaning';\n\nimport { ActiveLangugaeKeywords, } from '../Compiler/constants';\n\nimport { RemoveQuotes, RemoveBrackets, Count, } from '../Scripts/Helpers';\n\n//ANCHOR - Important functions to be used while parsing\n\n//Checking if string is empty. The way we check string is empty or not boils down to how cleaned_sourcedata sees empty string s\n\n//Needs improvement\n\nfunction IsSpecialChar(v, i) {\n    return (\n        v[i] == '?' ||\n    (v[i] == '=' && v[i + 1] != '=' && v[i - 1] != '=') ||\n    v[i] == '|' ||\n    v[i] == ';' ||\n    v[i] == '&' ||\n    v[i] == '^' ||\n    v[i] == '%' ||\n    v[i] == '$' ||\n    v[i] == '#' ||\n    v[i] == '@' ||\n    v[i] == '!' ||\n    v[i] == ':' ||\n    v[i] == '+' ||\n    v[i] == ',' ||\n    v[i] == '%' ||\n    v[i] == '-' ||\n    v[i + 1] == ')' ||\n    v[i] == '/' ||\n    v[i] == '*' ||\n    v[i] == '>' ||\n    v[i] == '<'\n    );\n}\n\nfunction IsConditionalOperator(e) {\n    return e.includes('>') || e.includes('<') || e.includes('==') || e.includes('!=');\n}\n\nfunction IsReservedKeyword(e) {\n    return (\n        e.includes('') ||\n    e.includes('') ||\n    e.includes('') ||\n    e.includes('') ||\n    e.includes('') ||\n    e.includes(ActiveLangugaeKeywords.Print) ||\n    e.includes(ActiveLangugaeKeywords.If) ||\n        /* cleaned_sourcedata[k + 1] == '='*/ e == '}'\n    );\n}\n\n\n\n//Checking if element is a pure evaluation like 1+2, 20*34, 40+6-98 etc\n\nfunction isPureEval(element) {\n    if (/^([-+]?[0-9]*\\.?[0-9]+[\\/\\+\\-\\*])+([-+]?[0-9]*\\.?[0-9]+)*$/gm.test(element)) {\n        return true;\n    }\n}\n\n//Checking if an element is calculation to be performed\n\nfunction isCalculation(element) {\n    if (!isNumber(element)) {\n        if (\n            (element.includes('+') ||\n        element.includes('%') ||\n        element.includes('-') ||\n        element.includes('*') ||\n        element.includes('/')) &&\n      ((element.includes('(') && element.includes(')')) || (!element.includes('(') && !element.includes(')'))) &&\n      element.charAt(element.length - 1) != '+'\n        ) {\n            return true;\n        }\n    }\n}\n\n//removing brackets from element\n\nfunction isArrayOperation(element) {\n    //To find Patterns like Array[2], Array[index] etc\n\n    element = RemoveBrackets(element);\n\n    if (element.charAt(element.length - 1) == ']' && element.includes('[') && element.charAt(0) != '[') {\n        return true;\n    }\n}\n\n//preparing sourcedata for easy parsing by handling new lines, enters etc.\n//cleaning up the data to get a suitable version of sourcedata. it's better to get suitable version because users can type what they wish but we need to maintain\n//integrity of program in every possible condition. So, we clean and refactor raw code to remove unnecessary data.\n\nfunction GetCleanSourcedata(sourcedata, cleaned_sourcedata, impurities) {\n    sourcedata = SourceDataReplaceforEasyParsing(sourcedata);\n\n    sourcedata.forEach((element) => {\n    //finding the elements which has =\" in it so that to seprate them into name,==,swanand if input is name=\"swanand\".\n\n        //We define such elements as impurites. We process them, bring them into a suitable form and push to cleaned_spircedata\n\n        //This is our cleaning factory\n\n        if (\n            !element.includes('==') &&\n      (element.indexOf('=\"') > -1 || element.indexOf('=') > 0 || element.charAt(0) == '=') &&\n      element != '=='\n        ) {\n            impurities.push(element); //push such element as impurity in impurities\n\n            let elements = element.split('=');\n            let index = cleaned_sourcedata.length;\n\n            cleaned_sourcedata[index] = elements[0];\n            cleaned_sourcedata[index + 1] = '=';\n            cleaned_sourcedata[index + 2] = elements[1];\n        }\n\n        //as long as element is pure, push it to new and clean version of sourcedata\n        if (!impurities.includes(element)) {\n            cleaned_sourcedata.push(element);\n        }\n\n    //\n    });\n\n    //removing empty \"\" values for final version of sourcedata\n    //SECTION FInal sourcedata cleaning\n\n    cleaned_sourcedata = cleaned_sourcedata.filter(function(item) {\n        return item !== '';\n    });\n\n    return cleaned_sourcedata;\n}\n\nfunction GetcleanedExpression(expression) {\n    expression = expression.replace(/ /g, '');\n\n    expression = RemoveQuotes(expression);\n    expression = expression.replace(/\\(/g, '');\n    expression = expression.replace(/\\)/g, '');\n\n    return expression;\n}\n\n//To convert 'a+b-c*d' into ['a','+','-','c','*','d']\n\nfunction SplitElementsArray(element, multiCal) {\n    element = multiCal ? element : RemoveBrackets(element);\n\n    if (IsConditionalOperator(element)) {\n        element = element.replace(/' '/g, '');\n    }\n    //get index of operation from updated tokens, as a reference\n\n    var StringVar = []; // here StrVar values will get pushed\n    var StrVar = ''; // its used to read var values of any type (anna,a,bad,x etc.) and push it to StringVar\n    //  var HindiRegex = /(?:^|\\s)[\\u0900-\\u097F]+?(?:\\s|$)/g\n\n    for (let j = 0; j < element.length; j++) {\n    // find if element[j] is alphabet\n\n        let flag = false;\n\n        if (\n            /^[A-Z]+$/i.test(element[j]) ||\n      element[j] == '[' ||\n      element[j] == ']' ||\n      element[j] == '\"' ||\n      element[j] == '\\'' ||\n      isNumber(element[j])\n        ) {\n            StrVar = StrVar + element[j]; //keep on pushing for long variable names as strings e.g hello, kalaam\n\n            flag = true;\n        }\n\n        if (element[j] == ')' || element[j] == '(') {\n            StringVar.push(element[j]);\n            flag = true;\n        }\n\n        //to solve [\"Age \"] into [\"Age\"], so that it can correctly find its value in updated_tokens\n\n        if (element[j] == ' ' && element[j + 1] != '+') {\n            StrVar = StrVar + element[j];\n            flag = true;\n        }\n\n        //for checking equivalency\n        if (element[j] == '=' && element[j + 1] == '=') {\n            StringVar.push(StrVar);\n\n            StringVar.push(element[j] + element[j + 1]);\n\n            StrVar = '';\n            flag = true;\n\n            j = j + 1;\n        }\n\n        //for checking !=\n        if (element[j] == '!' && element[j + 1] == '=') {\n            StringVar.push(StrVar);\n\n            StringVar.push(element[j] + element[j + 1]);\n\n            StrVar = '';\n            flag = true;\n        }\n\n        if (IsSpecialChar(element, j)) {\n            StringVar.push(StrVar); //push whatever string we have got because it's a string now, cant push operators with it\n\n            //finding the calculations that required brackets and adding them\n\n            if (element[j + 1] != ')') {\n                StringVar.push(element[j]); // fixing the bias\n            }\n\n            StrVar = ''; // emptyig the StrVar for next variable\n            flag = true;\n        }\n\n        //pushing hindi chars here\n        //UPDATED\n\n        if (flag == false) {\n            StrVar = StrVar + element[j];\n\n            flag = true;\n        }\n\n        if (element[j + 1] == null) {\n            StringVar.push(StrVar); //fixing bias for last element\n\n            flag = true;\n        }\n    }\n\n    return StringVar;\n}\n\n//get the start of loop in tokens array\n\nfunction getLoopIndexStart(mutable_tokens, j, check, setIndex) {\n    while (mutable_tokens[j].value != check) {\n        if (mutable_tokens[j + 1].value == check) {\n            setIndex = j + 1;\n        }\n\n        j++;\n    }\n    return setIndex;\n}\n\n//this is how we handle mulitiple conditions like  (ageone==10 && AverageAge<1000 && agetwo>100 || ageone==10) OR (ageone==10 )\n\nfunction handlemultConditions(element) {\n    for (let i = 0; i < element.length; i++) {\n        if (element.charAt(i) == '&' || element.charAt(i) == '|') {\n            let condition = element.substring(0, i + 2);\n\n            let SweepedElement = element.replace(condition, '');\n            let operator = '';\n\n            if (element.charAt(i) == '&') {\n                condition = condition.replace('&&', '');\n                operator = '&&';\n            } else if (element.charAt(i) == '|') {\n                condition = condition.replace('||', '');\n                operator = '||';\n            }\n\n            return {\n                SweepedElement,\n                condition,\n                operator,\n            };\n        }\n    }\n}\n\n//For operarions like Numbers.(23)\n\nfunction AddElementToArray(Sourcedata, index, updated_tokens, ExecutionStack, LinebylineSourcedata) {\n    let token = Sourcedata[index].value;\n\n    token = token.replace('', '');\n    let Split = token.split('.');\n    let Array = Split[0];\n    let ElementtoPush = RemoveBrackets(Split[1]);\n\n    if (ElementtoPush.charAt(0) == '\"' || ElementtoPush.charAt(0) == '\\'') {\n        ElementtoPush = ElementtoPush;\n    } else {\n        ElementtoPush = updated_tokens.find((el) => el.name == ElementtoPush).value;\n    }\n\n    let ArrayEl = updated_tokens.find((el) => el.name == Array);\n\n    let ArrayValue = ArrayEl.value;\n    if (ArrayValue == '[]') {\n        ArrayValue = ArrayValue.split(',');\n    }\n    ArrayValue.push(ElementtoPush);\n\n    let indexofArray = updated_tokens.indexOf(ArrayEl);\n\n    ArrayValue = ArrayValue.filter((el) => el != '[]');\n\n    updated_tokens[indexofArray].value = ArrayValue;\n\n    let message =\n    ' ' + '\"' + ElementtoPush + '\"' + '  ' + +'\"' + Array + '\"' + '  (Array)  (Store)  | ';\n\n    let expression = Sourcedata[index].value;\n    //\n\n    let Linenumber = LinebylineSourcedata.indexOf(expression);\n    Linenumber += 1;\n\n    AddtoExecutionStack(\n        ExecutionStack,\n        '',\n        '  VALUE    ',\n        Array,\n        ElementtoPush,\n        message,\n        Linenumber\n    );\n}\n\nfunction AcceptInputandSetValue(tokens, index, updated_tokens, ExecutionStack, LinebylineSourcedata) {\n    let SetInputValueAs = tokens[index].AcceptAs;\n\n  var value = prompt(\" \" + '\"' + SetInputValueAs + '\"' + \"       ?\"); // eslint-disable-line\n\n    updated_tokens.push({\n        name: SetInputValueAs,\n\n        value: value,\n    });\n\n    let message =\n    ' ' +\n    '\"' +\n    SetInputValueAs +\n    '\"' +\n    '  ' +\n    '\"' +\n    value +\n    '\"' +\n    '  Value  Computer  Memory  (Store)  | ';\n\n    let expression = '(' + SetInputValueAs + ')';\n\n    let Linenumber = LinebylineSourcedata.indexOf(expression);\n    Linenumber += 1;\n\n    AddtoExecutionStack(\n        ExecutionStack,\n        '',\n        '  VALUE    ',\n        SetInputValueAs,\n        value,\n        message,\n        Linenumber\n    );\n}\n\n//One of the most frequently needed function\n\n//it is used to calculate variable values like x= y*100 (y*100 will be calculated here)\n\n//or Array[i]= x+ageone. (x+ageone) is caluculated here\n\n//If you are not getting the values right, this is where you should start debugging\n\nfunction CalculateValues(calculation, j, updated_tokens, multiCal) {\n    var result;\n    try {\n        var calculationArray = SplitElementsArray(calculation, multiCal);\n\n        var StringVar = SetValues(calculationArray, updated_tokens);\n\n        let joinStringVar = StringVar.join('');\n\n        let NewStringVar = '';\n        //evaluate the exepression as it is when multical is true\n        //for expressions like c=(ageone+agetwo)/2 + (ageone+agetwo)*2\n\n        if (isNumber(joinStringVar.charAt(0)) || multiCal) {\n            NewStringVar = eval(joinStringVar);\n        }\n\n        //Not realted to numbers at all but strings\n        else if (!isNumber(joinStringVar.charAt(0))) {\n            StringVar.forEach((el) => {\n                if (el != '+') {\n                    el = el.toString();\n                    NewStringVar = NewStringVar + el;\n                }\n            });\n        } else {\n            StringVar = StringVar;\n        }\n\n        result = StringVar.length > 1 ? NewStringVar : StringVar;\n    } catch (e) {\n    //if c=a+b, and either b,a is undefined\n        result = e;\n    }\n\n    return result;\n}\n\n//Have to move this two functions to Pushfunctions.js\n\nfunction PushSetArrayIndexValue(value, tokens, data, i) {\n    tokens.push({\n        type: 'SetArrayIndexValue',\n        value: value,\n        ValueToSet: data[i + 2], //skipping =\n    });\n}\n\nfunction PushGetArrayIndexValue(value, tokens) {\n    tokens.push({\n        type: 'GetArrayIndexValue',\n        value: value,\n    });\n}\n\n//Performs only Array Operations\n\n//converts Array[a] into [Array, a]\n\n//This helps us to find their respective values easily in updated_tokens\n\nfunction CreateArrayElement(Value, iterator) {\n    let ArrayElement = RemoveBrackets(Value);\n\n    //Seprating out index identifier. a from Array[a]\n    let element = ArrayElement;\n    element = element.replace(']', '');\n\n    let Split = element.split('[');\n\n    Split[1] = iterator;\n\n    Split = Split.join('[');\n\n    Split = Split + ']';\n    ArrayElement = Split;\n\n    ArrayElement = ArrayElement.replace(/' '/g, '');\n\n    return ArrayElement;\n}\n\n//This function is used to get array or string elements. e.g Array[2], String[5]\n\n//Heavily used by compiler in loops\n\nfunction SetArrayorStringElement(\n    OriginalElement,\n    ArrayElement,\n    updated_tokens,\n    iterator,\n    NewValue,\n    tokens,\n    ExecutionStack,\n    LinebylineSourcedata\n) {\n    let variable = ArrayElement;\n\n    ArrayElement = ArrayElement.replace(']', '');\n\n    let Split = ArrayElement.split('[');\n\n    let indexCollected = Split[1];\n\n    let Element = updated_tokens.find((el) => el.name == NewValue);\n\n    //If element is an assigned variable. Find the value and set it.\n\n    if (Element) {\n        if (isCalculation(NewValue)) {\n            // This is to set x= y*100, Array[i]= x+ageone.\n\n            let token = tokens.find((el) => el.value == NewValue);\n            let j = tokens.indexOf(token) - 1;\n\n            let value = CalculateValues(NewValue, j, updated_tokens);\n\n            NewValue = value;\n        }\n\n        NewValue = Element.value;\n    }\n\n    if (iterator == true) {\n    //for Array[a]=a\n\n        if (!isCalculation(NewValue)) {\n            NewValue = indexCollected;\n        }\n    }\n\n    //if fresh newvalue is foumd. the one which doesnt yet exist in the program, then run this.\n    else {\n        NewValue = NewValue;\n    }\n\n    let token = updated_tokens.find((el) => el.name == Split[0]);\n\n    let index = updated_tokens.indexOf(token);\n\n    //updated_tokens values will also get updated thrugh this reference\n    let value = token.value;\n\n    value = value.toString();\n\n    value = value.replace(']', '');\n    value = value.replace('[', '');\n    value = value.split(',');\n\n    if (iterator == true) {\n    //This is for Array[a]=a\n\n        value[indexCollected] = indexCollected;\n    } else {\n    //Run when iterator is not needed. iterator is present in ArrayEleMENT ALREADY. This is for Array[i]='Swanand'\n\n        value[indexCollected] = NewValue;\n    }\n\n    //converting array back into the string representation of it for better printabillity\n\n    updated_tokens[index].value = '[' + value.toString() + ']';\n\n    let message =\n    ' Computer , ' +\n    '\"' +\n    variable +\n    '\"' +\n    ' , ' +\n    '\"' +\n    value[indexCollected] +\n    '\"' +\n    '  VALUE    Memory  (Store)   |';\n\n    let expression = OriginalElement;\n\n    expression = GetcleanedExpression(expression);\n\n    LinebylineSourcedata.forEach((el, index) => {\n        el = GetcleanedExpression(el);\n\n        if (el == expression) {\n            AddtoExecutionStack(\n                ExecutionStack,\n                '=',\n                '  VARIABLE   VALUE     ',\n                variable,\n                value[indexCollected],\n                message,\n                index + 1\n            );\n        }\n    });\n    // let Linenumber=''\n}\n\n//Printing a specific array element like Array[0], Array[3] etc.\n\n//Printing a dynamic array element like Array[i], Array[i+1] etc.\n\nfunction GetArrayorStringElement(element, updated_tokens, NewValue) {\n    element = element.replace(']', '');\n\n    let Split = element.split('[');\n\n    let indexCollected = Split[1];\n\n    if (isNumber(indexCollected)) {\n        let token = updated_tokens.find((el) => el.name == Split[0]);\n\n        let index = updated_tokens.indexOf(token);\n\n        let value = token.value.toString();\n\n        if (token.type == 'Array') {\n            value = value.replace(']', '');\n            value = value.replace('[', '');\n            value = value.split(',');\n\n            if (NewValue != undefined) {\n                if (!isNumber(NewValue)) {\n                    NewValue = RemoveQuotes(NewValue);\n                    NewValue = NewValue.replace(/'/g, '');\n                    NewValue = NewValue.replace(//g, '');\n                } else {\n                    NewValue = NewValue;\n                }\n\n                value[indexCollected] = NewValue;\n\n                updated_tokens[index].value = value;\n            } else {\n                value = value[indexCollected];\n              \n            }\n        } else if (token.type == 'string' || token.type != 'Array') {\n            value = value.charAt(indexCollected);\n        }\n\n        return value;\n    }\n}\n\n//Needs improvement\n\nfunction ForLoopArrayorStringOutput(elementValue, iterator, updated_tokens, global) {\n    let CurrentElement = '';\n    CurrentElement = elementValue.name + '[' + iterator + ']';\n    //Foundvalue is decided in the function depending upon the type.\n    //if it's array run array[2], if its string run string.charAt(2)\n    let FoundValue = GetArrayorStringElement(CurrentElement, updated_tokens);\n\n    global.output = global.output + FoundValue + '\\n';\n    console.log('global.output:', global.output);\n    return;\n}\n\n//Move it to typechecking.js\n\nfunction isNumber(element) {\n    if (/^[0-9]*$/gm.test(element)) {\n        return true;\n    }\n}\n\n//one of the heavily used function\n\n//converts ['a','+','b'] into [a+b] and then into [23,+,7] provided a=23 and b=7\n\nfunction SetValues(StringVar, updated_tokens) {\n    StringVar.forEach((el, i) => {\n        el = el.replace(/\\ /g, '');\n\n        if (el.charAt(el.length - 1) == ']') {\n            let ArrayElementValue = GetArrayorStringElement(el, updated_tokens);\n\n            ArrayElementValue = ArrayElementValue.replace(/['\"]+/g, '');\n\n            StringVar[i] = ArrayElementValue;\n        }\n\n        //finding variable value here\n\n        let token = updated_tokens.find((element) => element.name == el);\n\n        if (token != undefined) {\n            // if exists set it's value\n            StringVar[i] = token.value;\n        }\n    });\n\n    return StringVar;\n}\n\n//ANCHOR\n//Now we hae converted found \"a+b-d\" into [a,+,b,-,d]\n\n//Now lets run a loops on it to convert into [5,+,6,-,7]\n\n//Updated_tokens is updated by replacing \"value:a+b-d\" with \"value:5+6-7\".\n//after eval function it will be set as \"value:2\"\n\nfunction UpdateUpdated_tokenswithValues(payload) {\n    let StringVar = payload;\n\n    //run if it's arithmetic operation like [\"5+6-7\"]\n    if (isNumber(StringVar[0])) {\n        let value = eval(StringVar.join(''));\n\n        return value;\n    } else if (StringVar[1] == '==') {\n        let a = StringVar[0].toString();\n        let b = StringVar[2].toString();\n\n        a = a.replace(/\"/g, '');\n        a = a.replace(/'/g, '');\n\n        b = b.replace(/'/g, '');\n        b = b.replace(/\"/g, '');\n\n        let value = eval(a == b);\n\n        return value;\n    }\n\n    //run if it's String operation like [\"reddit\",\"+\", \"is goat\"]\n    else {\n        if (StringVar.includes('+')) {\n            StringVar[StringVar.indexOf('+')] = ' ';\n        }\n\n        let value = StringVar.join('');\n\n        return value;\n    }\n}\n\n//Handle Blocks is a function which takes care of nested block by taking care of nested '{' and '}' brackets\n\n//it uses the stack to push and pop brackets to accurately identify start and the end of the block\n\nfunction HandleBlocks(mutable_tokens, j, StoreResult) {\n    //StoreResult is used to push data into it in case of forloop or while loop conetext\n\n    //for a normal block like conditional block it might not need to be used yet\n\n    let ArrayBrackets = [];\n\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n\n        if (mutable_tokens[j].value == '{') {\n            ArrayBrackets.push({\n                type: '{',\n                index: j,\n            });\n\n            if (StoreResult != undefined) {\n                StoreResult.push(mutable_tokens[j]);\n            }\n        } else if (mutable_tokens[j].value == '}') {\n            //As soon as open bracket is found, pop the last arraybracket stack value\n            //that's the match\n\n            let x = ArrayBrackets.pop();\n\n            if (StoreResult != undefined) {\n                StoreResult.push(mutable_tokens[j]);\n\n                mutable_tokens[x.index].startIndex = x.index;\n                mutable_tokens[x.index].EndIndex = j;\n            }\n\n            //set start and end index value for that { } block\n            mutable_tokens[x.index].startIndex = x.index;\n            mutable_tokens[x.index].EndIndex = j;\n            if (ArrayBrackets.length == 0) {\n                //As soon as stack is empty we have finished our last lblock\n\n                break;\n            }\n        } else {\n            if (StoreResult != undefined) {\n                StoreResult.push(mutable_tokens[j]);\n            }\n        }\n\n        j++;\n    }\n\n    return {\n        StoreResult,\n        j,\n    };\n}\n\n//Handles conditional statements\n\n//It does not return true or false rather it tells us whether to skip the execution or continue execution depending upon truth value of condition\n\n//If true 'i' is set to current index position, if false 'i' is skipped until the end of conditional block/\n\nfunction HandleConditions(sourcedata, i, updated_tokens) {\n    let element = sourcedata[i].value;\n\n    //let token= updated_tokens.find(el=> el.originalvalue==sourcedata[i].value)\n\n    let SplitArray = SplitElementsArray(element);\n\n    let Values = SetValues(SplitArray, updated_tokens);\n\n    let ForLoopConditionValue = UpdateUpdated_tokenswithValues(Values);\n\n    if (ForLoopConditionValue == false) {\n        while (sourcedata[i + 1].value != '}') {\n            //tokens.splice(i+1, 1);\n\n            //No need to delete tokens, we are iust skipping over the values so that they won't be printed or run\n\n            i++;\n        }\n\n        return i;\n    }\n}\n\n//Handly function to split and join Arrays\n\nfunction SplitandJoin(array, output, element) {\n    array[1] = output;\n\n    let Joinarray = array.join('[') + ']';\n    element = Joinarray;\n\n    return element;\n}\n\nvar AccumulateValue = '';\n\nfunction ResetValue() {\n    AccumulateValue = '';\n}\n\n//One of the most important functions\n\n//Takes care of all kind of assignments provided in raw sourcecode\n\n//Message=\"Hello World\", Numbers=[1,2,3,4,5], Numbers[2]=23 etc.\n\n//If a certain value is not being assigned properly start debugiing here\n\nfunction AssignorUpdateValues(\n    sourcedata,\n    i,\n    updated_tokens,\n    iterator,\n    OriginalIterator,\n    global,\n    ExecutionStack,\n    LinebylineSourcedata\n) {\n    let variable = sourcedata[i - 1].value;\n\n    let varvalue = sourcedata[i + 1].value;\n\n    var FinalValue = '';\n\n    if (varvalue == '\"' || varvalue == '\\'') {\n        varvalue = ' ';\n    }\n\n    //if someone accidenlty types Name= or any other primary keywords\n\n    function AssignmentError(value, keywords) {\n        if (value != '') {\n            for (let x in keywords) {\n                if (keywords[x].includes(value)) {\n                    return true;\n                } else {\n                    return false;\n                }\n            }\n        }\n    }\n\n    //checkAssignmentError(varvalue, ActiveLangugaeKeywords);\n\n    var error = AssignmentError(varvalue, ActiveLangugaeKeywords);\n\n    if (error) {\n        let error = 'Assignment error in ' + '\"' + variable + ' = ' + '\"';\n\n        global.error.push(error);\n    }\n\n    let varvalueType = sourcedata[i + 1].type;\n\n    function findvalueinMemory(v) {\n        return updated_tokens.find((el) => el.name == v);\n    }\n\n    let memory_value = findvalueinMemory(varvalue);\n\n    //if a=b and user haven't defined b yet\n    //doesn't work on a=b+c, where b is undefined, calculateValues function takes care of that\n\n    function checkifUndefined(v, mv, type) {\n        if (type == 'variable' && !isNumber(v) && mv == undefined) {\n            return `Cannot set ${variable} to undefined : ${v} is undefined `;\n        } else {\n            return false;\n        }\n    }\n\n    let undefined_error = checkifUndefined(varvalue, memory_value, varvalueType);\n\n    //if we have any undefined variables\n    if (undefined_error != false) {\n        global.error.push(undefined_error);\n    }\n\n    //to count the length, Numbers.()s\n    else if (varvalue.includes('')) {\n        let Split = varvalue.split('.');\n\n        let item = Split[0];\n\n        let Itemvalue = updated_tokens.find((el) => el.name == item).value;\n\n        if (Itemvalue.includes('[')) {\n            Itemvalue = Itemvalue.toString().split(',');\n        } else if (Itemvalue.length == 1) {\n            Itemvalue = Itemvalue;\n        } else {\n            Itemvalue = Itemvalue.toString();\n        }\n\n        let ItemvalueLength = Itemvalue.length;\n\n        FinalValue = ItemvalueLength;\n\n        updated_tokens.push({\n            name: variable,\n\n            value: ItemvalueLength,\n\n            identifier: i,\n            type: 'CalLength',\n        });\n    }\n\n    //this runs only for operations like x=Numbers[a]\n    else if (varvalueType == 'GetArrayIndexValue') {\n        let n = updated_tokens.find((el) => el.name == variable);\n\n        let index = updated_tokens.indexOf(n);\n\n        //Iterator is used only when we are looping over provided index not for the index that needs to be calculated\n        let element = varvalue.replace(']', '');\n\n        if (element.includes('+')) {\n            var Split = element.split('+');\n        } else if (element.includes('-')) {\n            var Split = element.split('-');\n        }\n\n        var flag = false;\n\n        //For operations like Name=Name+ Array[i]\n\n        if (element.includes('+') || (element.includes('-') && !Split[0].includes('['))) {\n            flag = true;\n\n            let token = updated_tokens.find((el) => el.name == Split[0]);\n            let index = updated_tokens.indexOf(token);\n\n            let ArrayItem = Split[1].split('[');\n\n            let output = CalculateValues(ArrayItem[1], i, updated_tokens);\n\n            let ArrayElement = SplitandJoin(ArrayItem, output, element);\n\n            //Get Numbers[3] value and now set it to our variable x\n            let value = GetArrayorStringElement(ArrayElement, updated_tokens);\n\n            AccumulateValue += value;\n\n            updated_tokens[index].value = AccumulateValue;\n            FinalValue = AccumulateValue;\n        } else {\n            var Split = element.split('[');\n        }\n\n        //for operations like x= Array[i+1] etc\n\n        if ((Split[1].includes('-') || Split[1].includes('+')) && !Split[1].includes('[')) {\n            let output = CalculateValues(Split[1], i, updated_tokens);\n\n            element = SplitandJoin(Split, output, element);\n        }\n\n        let token = updated_tokens.find((el) => el.name == Split[1]);\n\n        //for operations like Array[Age]. Here index is an already defined variable\n        if (token != undefined && OriginalIterator != Split[1] && token.name != '') {\n            element = SplitandJoin(Split, token.value, element);\n        }\n\n        //for operations like Array[i]: Looping over original index value\n        else if (OriginalIterator == Split[1]) {\n            element = SplitandJoin(Split, iterator, element);\n        }\n\n        let ArrayElement = element;\n\n        //Get Numbers[3] value and now set it to our variable x\n        let value = GetArrayorStringElement(ArrayElement, updated_tokens);\n        //\n        if (value != undefined) {\n            value = RemoveQuotes(value);\n        }\n\n        //\n\n        if (n != undefined && flag == false) {\n            updated_tokens[index].value = value;\n\n            FinalValue = value;\n        } else if (flag == false) {\n            updated_tokens.push({\n                name: variable,\n\n                value: value,\n\n                identifier: i,\n                type: sourcedata[i + 1].type,\n            });\n\n            FinalValue = value;\n        }\n    } else {\n    //if we are setting already defined value to new variable\n        let m = updated_tokens.find((el) => el.name == varvalue);\n\n        if (m != undefined) {\n            varvalue = m.value;\n\n            FinalValue = varvalue;\n        }\n\n        let n = updated_tokens.find((el) => el.name == variable);\n\n        if (n == undefined) {\n            //to check if the assigned value needs to be calculated. this is futher diveded in two types\n\n            if (isCalculation(varvalue)) {\n                //type 1- Age= 2020-2000\n\n                if (isPureEval(varvalue)) {\n                    let value = eval(varvalue);\n\n                    //write function for this, so repeatable\n                    updated_tokens.push({\n                        name: variable,\n\n                        value: value,\n\n                        identifier: i,\n                        type: sourcedata[i + 1].type,\n                    });\n\n                    FinalValue = value;\n                }\n\n                //type 2- X= ageone+agetwo\n                else {\n                    //performing the calculation\n                    let multiCal = sourcedata[i + 1].multiCal;\n                    let value = CalculateValues(varvalue, i, updated_tokens, multiCal);\n\n                    updated_tokens.push({\n                        name: variable,\n\n                        value: value,\n\n                        identifier: i,\n                        type: sourcedata[i + 1].type,\n                    });\n\n                    FinalValue = value;\n                }\n            }\n\n            //if there is no need to calculate, push values as it is\n            else if (!isCalculation(varvalue)) {\n                updated_tokens.push({\n                    name: variable,\n\n                    value: varvalue,\n\n                    identifier: i,\n                    type: sourcedata[i + 1].type,\n                });\n\n                FinalValue = varvalue;\n            }\n        }\n\n        //if it's already assgined, reassign it with updated value\n        else {\n            varvalue = varvalue.toString();\n\n            if (\n                varvalue.includes('-') ||\n        varvalue.includes('%') ||\n        varvalue.includes('+') ||\n        varvalue.includes('/') ||\n        varvalue.includes('*')\n            ) {\n                //\n\n                let NewValue = CalculateValues(varvalue, i, updated_tokens);\n\n                n.value = NewValue;\n\n                FinalValue = NewValue;\n            } else {\n                let index = updated_tokens.indexOf(n);\n                updated_tokens[index].value = varvalue;\n\n                FinalValue = varvalue;\n            }\n        }\n    }\n\n    // console.log('variable, varvalue : ', variable, FinalValue );\n\n    let message = '';\n\n    if (isCalculation(sourcedata[i + 1].value) || sourcedata[i + 1].value.includes('')) {\n        message =\n      ' Computer       , ' +\n      '\"' +\n      sourcedata[i + 1].value +\n      '\"' +\n      '  (Solve)    ?' +\n      '\\n' +\n      '  ,  Computer ' +\n      '\"' +\n      sourcedata[i + 1].value +\n      '\"' +\n      '  Solve , ' +\n      '\"' +\n      variable +\n      '\"' +\n      '    Memory  (Store)  | ' +\n      '\\n' +\n      '  , ' +\n      '\"' +\n      sourcedata[i + 1].value +\n      '\"' +\n      '   (Value) , ' +\n      '\"' +\n      FinalValue +\n      '\"' +\n      '   |' +\n      '\\n' +\n      ' , Computer ' +\n      '\"' +\n      variable +\n      '\"' +\n      '  ' +\n      '\"' +\n      FinalValue +\n      '\"' +\n      '  VALUE    Memory  (Store)    |';\n    } else {\n        message =\n      ' Computer , ' +\n      '\"' +\n      variable +\n      '\"' +\n      ' , ' +\n      '\"' +\n      varvalue +\n      '\"' +\n      '  VALUE    Memory  (Store)   |';\n    }\n\n    //This is the experession whcih is getting evaluated.\n\n    let expression = variable + '=' + varvalue;\n    // console.log(updated_tokens);\n    expression = GetcleanedExpression(expression);\n\n    LinebylineSourcedata.forEach((el, index) => {\n        el = el.replace(/ /, '');\n\n        el = GetcleanedExpression(el);\n\n        if (el == expression) {\n            AddtoExecutionStack(\n                ExecutionStack,\n                '=',\n                ' VARIABLE   VALUE     ',\n                variable,\n                varvalue,\n                message,\n                index + 1\n            );\n        }\n    });\n}\n\n//GetConditionValue is our goto function to evaluate a condition to true or false\n\nfunction GetConditionValue(element, updated_tokens) {\n    var ConditionValue = false;\n\n    if (element.includes('&&') || element.includes('||')) {\n        let MultConditionsCount = parseInt(Count('&', element)) + parseInt(Count('|', element));\n\n        //this will be our final values\n        //converted as true&&false&&true||true\n        let BuiltMultConditonWithValues = '';\n        let LastResult = {};\n\n        //running for loop on original condition to calculates each individual condition and adding its value in BuiltMultConditonWithValues\n\n        for (let i = 0; i <= MultConditionsCount; i++) {\n            if (i == MultConditionsCount) {\n                let condition = LastResult.SweepedElement;\n                condition = condition.replace(/ /g, '');\n\n                let SplitArray = SplitElementsArray(condition);\n\n                let Values = SetValues(SplitArray, updated_tokens);\n\n                ConditionValue = UpdateUpdated_tokenswithValues(Values);\n\n                BuiltMultConditonWithValues = BuiltMultConditonWithValues + ConditionValue;\n            } else {\n                let result = handlemultConditions(element);\n\n                LastResult = result;\n\n                element = result.SweepedElement;\n                let condition = result.condition;\n                condition = condition.replace(/ /g, '');\n\n                let SplitArray = SplitElementsArray(condition);\n\n                let Values = SetValues(SplitArray, updated_tokens);\n\n                ConditionValue = UpdateUpdated_tokenswithValues(Values);\n\n                BuiltMultConditonWithValues = BuiltMultConditonWithValues + ConditionValue + result.operator;\n            }\n        }\n\n        //setting the final condition value in cases like  (ageone==10 && AverageAge<1000 && agetwo>100 || ageone==10)\n\n        ConditionValue = eval(BuiltMultConditonWithValues);\n    } else {\n    //let token= updated_tokens.find(el=> el.originalvalue==mutable_tokens[j].value)\n\n        let SplitArray = SplitElementsArray(element);\n        // console.log('SplitArray: ', SplitArray);\n\n        let Values = SetValues(SplitArray, updated_tokens);\n\n        Values = Values.filter(function(item) {\n            return item !== '' && item != '\\'' && item != '=\\'' && item != '\"';\n        });\n\n        //Setting the final condition value in cases like  (ageone==10)\n\n        //console.log('Values: ', Values);\n        ConditionValue = UpdateUpdated_tokenswithValues(Values);\n    }\n\n    return ConditionValue;\n}\n\n//Getting every single information about our forloop\n\nfunction ForLoopSetMetadata(tokens, i, updated_tokens) {\n    var ForLoopMetaData = tokens[i + 1];\n\n    //Splitting the ForLoopMetaData values individually\n    var iterator = ForLoopMetaData.iterator;\n\n    var element = ForLoopMetaData.value;\n    var IterationStart = parseInt(ForLoopMetaData.iterationStart);\n\n    var IterationEnd = parseInt(ForLoopMetaData.iterationEnd);\n\n    //pushing index\n\n    //checking if iteration end is an predefined variable\n\n    let token = updated_tokens.find((el) => el.name == ForLoopMetaData.iterationEnd);\n\n    if (token != undefined) {\n        IterationEnd = parseInt(token.value);\n    }\n\n    // var ForLoopSourcedata = ForLoopMetaData.ForLoopSourcedata\n\n    var elementValue = updated_tokens.find((el) => el.name == element);\n\n    var elementLength = 0;\n\n    var ForLoopSourcedataIndexStart = 0;\n\n    var OriginalIterator = ForLoopMetaData.iterator;\n\n    // Run if start and end parameters are not given e.g  a   Name \n    // This is ran just to get Start and End parameters as they are not provided\n    if (ForLoopMetaData.iterationEnd == undefined) {\n    //run if element is array\n        if (elementValue.type == 'Array') {\n            elementLength = elementValue.value.split(',').length;\n\n            IterationStart = 0;\n            IterationEnd = elementLength - 1;\n        }\n\n        //run if element is String\n        else {\n            elementLength = elementValue.value.length;\n            IterationStart = 0;\n            IterationEnd = elementLength - 1;\n        }\n    }\n\n    var Cycle = IterationEnd;\n\n    return {\n        ForLoopSourcedataIndexStart,\n        Cycle,\n        OriginalIterator,\n        IterationStart,\n        IterationEnd,\n        iterator,\n        element,\n        elementValue,\n    };\n}\n\n//To resolve operations like Array[a]=a+2 in loops and in plain context\n\nfunction SetArrayIndexValue(\n    SourceData,\n    i,\n    j,\n    CompleteTokenValueList,\n    tokens,\n    OriginalIterator,\n    iterator,\n    ExecutionStack,\n    LinebylineSourcedata\n) {\n    let Value = SourceData[i].value;\n\n    let ValueToSet = SourceData[i].ValueToSet;\n\n    let OriginalElement = Value + '=' + ValueToSet;\n\n    let element = RemoveBrackets(Value);\n\n    var ArrayElement = '';\n\n    //Seprating out index identifier. xyz from Array[xyz]\n\n    element = element.replace(']', '');\n\n    let Split = element.split('[');\n\n    // run if we need to set direct Array element value. like Array[2]= xyx\n    if (isNumber(Split[1])) {\n        Split = Split.join('[');\n        //\n\n        Split = Split + ']';\n\n        ArrayElement = Split;\n        //\n\n        NewValueToSet = CalculateValues(ValueToSet, j, CompleteTokenValueList);\n\n        SetArrayorStringElement(\n            OriginalElement,\n            ArrayElement,\n            CompleteTokenValueList,\n            false,\n            NewValueToSet,\n            tokens,\n            ExecutionStack,\n            LinebylineSourcedata\n        );\n    }\n\n    // run if we need to dynamically set Array element value. like Array[i]= xyx\n    //CreateArrayElement function will create dynamic Array values. like Array[0], Array[1] etc.\n    else {\n        let index = Split[1];\n\n        // setting iterator as per user input\n        //for iterator like count=count + 1, Array[count]\n\n        let newInterator = 0;\n\n        let token = CompleteTokenValueList.find((el) => el.name == index);\n\n        if (token != undefined) {\n            newInterator = token.value;\n        } else {\n            newInterator = iterator;\n        }\n\n        ArrayElement = CreateArrayElement(Value, newInterator);\n    }\n\n    // this code is written to find operations like Array[a]= a*100+age*a. notice a\n    //find a way to simplify this in long term\n\n    let data = ValueToSet;\n\n    data = data.split('*').toString();\n    data = data.split('+').toString();\n    data = data.split('-').toString();\n    data = data.split('/').toString();\n    data = data.split(',');\n\n    //building a new value to convert a*100+age*a into 5*100+age*a and then sending it to CalculateValues()\n    let NewValueToSet = '';\n\n    if (data.includes(Split[1]) && data.length > 1) {\n    //we have operations like Array[a]= a*100+age*a. notice a\n\n        for (let m = 0; m < ValueToSet.length; m++) {\n            if (ValueToSet[m] == Split[1] && !/^[a-z]+$/i.test(ValueToSet[m + 1])) {\n                // value is been set . replacing index value a with iteartor value 0,1,2, etc.\n                NewValueToSet = NewValueToSet + iterator;\n            } else {\n                NewValueToSet = NewValueToSet + ValueToSet[m];\n            }\n        }\n\n        let iterat = false;\n        //gave it a different name so it would not fuck up with for loop iterator\n\n        NewValueToSet = CalculateValues(NewValueToSet, j, CompleteTokenValueList);\n\n        SetArrayorStringElement(\n            OriginalElement,\n            ArrayElement,\n            CompleteTokenValueList,\n            iterat,\n            NewValueToSet,\n            tokens,\n            ExecutionStack,\n            LinebylineSourcedata\n        );\n    }\n\n    // this condition enables program to only run  Array[a]= xyz when iterator is a. It disallows running Array[blablabla]=xyz\n    if (OriginalIterator == Split[1]) {\n        if (Split[1] == ValueToSet) {\n            let iterator = true;\n\n            SetArrayorStringElement(\n                OriginalElement,\n                ArrayElement,\n                CompleteTokenValueList,\n                iterator,\n                ValueToSet,\n                tokens,\n                ExecutionStack,\n                LinebylineSourcedata\n            );\n        }\n\n        // for operations like Array[a]=ageone*100\n\n        if (!data.includes(Split[1]) && OriginalIterator == Split[1]) {\n            let iterator = false;\n\n            ValueToSet = CalculateValues(ValueToSet, j, CompleteTokenValueList);\n\n            SetArrayorStringElement(\n                OriginalElement,\n                ArrayElement,\n                CompleteTokenValueList,\n                iterator,\n                ValueToSet,\n                tokens,\n                ExecutionStack,\n                LinebylineSourcedata\n            );\n        }\n    }\n\n    //might have to add more conditions in the future\n    else {\n        let iterator = false;\n\n        ValueToSet = CalculateValues(ValueToSet, j, CompleteTokenValueList);\n\n        SetArrayorStringElement(\n            OriginalElement,\n            ArrayElement,\n            CompleteTokenValueList,\n            iterator,\n            ValueToSet,\n            tokens,\n            ExecutionStack,\n            LinebylineSourcedata\n        );\n    }\n}\n\nfunction AddtoExecutionStack(stack, keyword, keywordUse, variable, value, message, Linenumber) {\n    stack.push({\n        keyword: keyword,\n        keywordUse: keywordUse,\n        variable: variable,\n        value: value,\n        message: message,\n        Linenumber: Linenumber,\n    });\n}\n\nexport {\n    IsReservedKeyword,\n    GetCleanSourcedata,\n    GetcleanedExpression,\n    ForLoopSetMetadata,\n    getLoopIndexStart,\n    AddElementToArray,\n    ResetValue,\n    HandleBlocks,\n    HandleConditions,\n    AssignorUpdateValues,\n    PushGetArrayIndexValue,\n    PushSetArrayIndexValue,\n    isArrayOperation,\n    GetConditionValue,\n    CalculateValues,\n    handlemultConditions,\n    CreateArrayElement,\n    SetArrayorStringElement,\n    ForLoopArrayorStringOutput,\n    GetArrayorStringElement,\n    AcceptInputandSetValue,\n    SplitElementsArray,\n    SetValues,\n    UpdateUpdated_tokenswithValues,\n    SetArrayIndexValue,\n    AddtoExecutionStack,\n};\n"]}]}