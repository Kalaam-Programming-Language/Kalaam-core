{"remainingRequest":"/Users/jonny/Desktop/myProjects/Kalaam-core/FE/node_modules/babel-loader/lib/index.js!/Users/jonny/Desktop/myProjects/Kalaam-core/FE/node_modules/quasar/src/directives/ClosePopup.js","dependencies":[{"path":"/Users/jonny/Desktop/myProjects/Kalaam-core/FE/node_modules/quasar/src/directives/ClosePopup.js","mtime":499162500000},{"path":"/Users/jonny/Desktop/myProjects/Kalaam-core/FE/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jonny/Desktop/myProjects/Kalaam-core/FE/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucGFyc2UtaW50IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnRpbWVycyI7CmltcG9ydCB7IGNsb3NlUG9ydGFscyB9IGZyb20gJy4uL21peGlucy9wb3J0YWwuanMnOwppbXBvcnQgeyBpc0tleUNvZGUgfSBmcm9tICcuLi91dGlscy9rZXktY29tcG9zaXRpb24uanMnOwovKgogKiBkZXB0aAogKiAgIDwgMCAgLS0+IGNsb3NlIGFsbCBjaGFpbgogKiAgIDAgICAgLS0+IGRpc2FibGVkCiAqICAgPiAwICAtLT4gY2xvc2UgY2hhaW4gdXAgdG8gTiBwYXJlbnQKICovCgpmdW5jdGlvbiBnZXREZXB0aCh2YWx1ZSkgewogIGlmICh2YWx1ZSA9PT0gZmFsc2UpIHsKICAgIHJldHVybiAwOwogIH0KCiAgaWYgKHZhbHVlID09PSB0cnVlIHx8IHZhbHVlID09PSB2b2lkIDApIHsKICAgIHJldHVybiAxOwogIH0KCiAgdmFyIGRlcHRoID0gcGFyc2VJbnQodmFsdWUsIDEwKTsKICByZXR1cm4gaXNOYU4oZGVwdGgpID8gMCA6IGRlcHRoOwp9CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ2Nsb3NlLXBvcHVwJywKICBiaW5kOiBmdW5jdGlvbiBiaW5kKGVsLCBfcmVmLCB2bm9kZSkgewogICAgdmFyIHZhbHVlID0gX3JlZi52YWx1ZTsKICAgIHZhciBjdHggPSB7CiAgICAgIGRlcHRoOiBnZXREZXB0aCh2YWx1ZSksCiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIoZXZ0KSB7CiAgICAgICAgLy8gYWxsb3cgQGNsaWNrIHRvIGJlIGVtaXR0ZWQKICAgICAgICBjdHguZGVwdGggIT09IDAgJiYgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBjbG9zZVBvcnRhbHModm5vZGUuY29tcG9uZW50SW5zdGFuY2UgfHwgdm5vZGUuY29udGV4dCwgZXZ0LCBjdHguZGVwdGgpOwogICAgICAgIH0pOwogICAgICB9LAogICAgICBoYW5kbGVyS2V5OiBmdW5jdGlvbiBoYW5kbGVyS2V5KGV2dCkgewogICAgICAgIGlzS2V5Q29kZShldnQsIDEzKSA9PT0gdHJ1ZSAmJiBjdHguaGFuZGxlcihldnQpOwogICAgICB9CiAgICB9OwoKICAgIGlmIChlbC5fX3FjbG9zZXBvcHVwICE9PSB2b2lkIDApIHsKICAgICAgZWwuX19xY2xvc2Vwb3B1cF9vbGQgPSBlbC5fX3FjbG9zZXBvcHVwOwogICAgfQoKICAgIGVsLl9fcWNsb3NlcG9wdXAgPSBjdHg7CiAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGN0eC5oYW5kbGVyKTsKICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgY3R4LmhhbmRsZXJLZXkpOwogIH0sCiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoZWwsIF9yZWYyKSB7CiAgICB2YXIgdmFsdWUgPSBfcmVmMi52YWx1ZSwKICAgICAgICBvbGRWYWx1ZSA9IF9yZWYyLm9sZFZhbHVlOwoKICAgIGlmIChlbC5fX3FjbG9zZXBvcHVwICE9PSB2b2lkIDAgJiYgdmFsdWUgIT09IG9sZFZhbHVlKSB7CiAgICAgIGVsLl9fcWNsb3NlcG9wdXAuZGVwdGggPSBnZXREZXB0aCh2YWx1ZSk7CiAgICB9CiAgfSwKICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZChlbCkgewogICAgdmFyIGN0eCA9IGVsLl9fcWNsb3NlcG9wdXBfb2xkIHx8IGVsLl9fcWNsb3NlcG9wdXA7CgogICAgaWYgKGN0eCAhPT0gdm9pZCAwKSB7CiAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY3R4LmhhbmRsZXIpOwogICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXl1cCcsIGN0eC5oYW5kbGVyS2V5KTsKICAgICAgZGVsZXRlIGVsW2VsLl9fcWNsb3NlcG9wdXBfb2xkID8gJ19fcWNsb3NlcG9wdXBfb2xkJyA6ICdfX3FjbG9zZXBvcHVwJ107CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/Users/jonny/Desktop/myProjects/Kalaam-core/FE/node_modules/quasar/src/directives/ClosePopup.js"],"names":["closePortals","isKeyCode","getDepth","value","depth","parseInt","isNaN","name","bind","el","vnode","ctx","handler","evt","setTimeout","componentInstance","context","handlerKey","__qclosepopup","__qclosepopup_old","addEventListener","update","oldValue","unbind","removeEventListener"],"mappings":";;AAAA,SAASA,YAAT,QAA6B,qBAA7B;AACA,SAASC,SAAT,QAA0B,6BAA1B;AAEA;;;;;;;AAOA,SAASC,QAAT,CAAmBC,KAAnB,EAA0B;AACxB,MAAIA,KAAK,KAAK,KAAd,EAAqB;AACnB,WAAO,CAAP;AACD;;AACD,MAAIA,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAK,CAArC,EAAwC;AACtC,WAAO,CAAP;AACD;;AAED,MAAMC,KAAK,GAAGC,QAAQ,CAACF,KAAD,EAAQ,EAAR,CAAtB;AACA,SAAOG,KAAK,CAACF,KAAD,CAAL,GAAe,CAAf,GAAmBA,KAA1B;AACD;;AAED,eAAe;AACbG,EAAAA,IAAI,EAAE,aADO;AAGbC,EAAAA,IAHa,gBAGPC,EAHO,QAGQC,KAHR,EAGe;AAAA,QAAhBP,KAAgB,QAAhBA,KAAgB;AAC1B,QAAMQ,GAAG,GAAG;AACVP,MAAAA,KAAK,EAAEF,QAAQ,CAACC,KAAD,CADL;AAGVS,MAAAA,OAHU,mBAGDC,GAHC,EAGI;AACZ;AACAF,QAAAA,GAAG,CAACP,KAAJ,KAAc,CAAd,IAAmBU,UAAU,CAAC,YAAM;AAClCd,UAAAA,YAAY,CAACU,KAAK,CAACK,iBAAN,IAA2BL,KAAK,CAACM,OAAlC,EAA2CH,GAA3C,EAAgDF,GAAG,CAACP,KAApD,CAAZ;AACD,SAF4B,CAA7B;AAGD,OARS;AAUVa,MAAAA,UAVU,sBAUEJ,GAVF,EAUO;AACfZ,QAAAA,SAAS,CAACY,GAAD,EAAM,EAAN,CAAT,KAAuB,IAAvB,IAA+BF,GAAG,CAACC,OAAJ,CAAYC,GAAZ,CAA/B;AACD;AAZS,KAAZ;;AAeA,QAAIJ,EAAE,CAACS,aAAH,KAAqB,KAAK,CAA9B,EAAiC;AAC/BT,MAAAA,EAAE,CAACU,iBAAH,GAAuBV,EAAE,CAACS,aAA1B;AACD;;AAEDT,IAAAA,EAAE,CAACS,aAAH,GAAmBP,GAAnB;AAEAF,IAAAA,EAAE,CAACW,gBAAH,CAAoB,OAApB,EAA6BT,GAAG,CAACC,OAAjC;AACAH,IAAAA,EAAE,CAACW,gBAAH,CAAoB,OAApB,EAA6BT,GAAG,CAACM,UAAjC;AACD,GA3BY;AA6BbI,EAAAA,MA7Ba,kBA6BLZ,EA7BK,SA6BoB;AAAA,QAAnBN,KAAmB,SAAnBA,KAAmB;AAAA,QAAZmB,QAAY,SAAZA,QAAY;;AAC/B,QAAIb,EAAE,CAACS,aAAH,KAAqB,KAAK,CAA1B,IAA+Bf,KAAK,KAAKmB,QAA7C,EAAuD;AACrDb,MAAAA,EAAE,CAACS,aAAH,CAAiBd,KAAjB,GAAyBF,QAAQ,CAACC,KAAD,CAAjC;AACD;AACF,GAjCY;AAmCboB,EAAAA,MAnCa,kBAmCLd,EAnCK,EAmCD;AACV,QAAME,GAAG,GAAGF,EAAE,CAACU,iBAAH,IAAwBV,EAAE,CAACS,aAAvC;;AACA,QAAIP,GAAG,KAAK,KAAK,CAAjB,EAAoB;AAClBF,MAAAA,EAAE,CAACe,mBAAH,CAAuB,OAAvB,EAAgCb,GAAG,CAACC,OAApC;AACAH,MAAAA,EAAE,CAACe,mBAAH,CAAuB,OAAvB,EAAgCb,GAAG,CAACM,UAApC;AACA,aAAOR,EAAE,CAACA,EAAE,CAACU,iBAAH,GAAuB,mBAAvB,GAA6C,eAA9C,CAAT;AACD;AACF;AA1CY,CAAf","sourcesContent":["import { closePortals } from '../mixins/portal.js'\nimport { isKeyCode } from '../utils/key-composition.js'\n\n/*\n * depth\n *   < 0  --> close all chain\n *   0    --> disabled\n *   > 0  --> close chain up to N parent\n */\n\nfunction getDepth (value) {\n  if (value === false) {\n    return 0\n  }\n  if (value === true || value === void 0) {\n    return 1\n  }\n\n  const depth = parseInt(value, 10)\n  return isNaN(depth) ? 0 : depth\n}\n\nexport default {\n  name: 'close-popup',\n\n  bind (el, { value }, vnode) {\n    const ctx = {\n      depth: getDepth(value),\n\n      handler (evt) {\n        // allow @click to be emitted\n        ctx.depth !== 0 && setTimeout(() => {\n          closePortals(vnode.componentInstance || vnode.context, evt, ctx.depth)\n        })\n      },\n\n      handlerKey (evt) {\n        isKeyCode(evt, 13) === true && ctx.handler(evt)\n      }\n    }\n\n    if (el.__qclosepopup !== void 0) {\n      el.__qclosepopup_old = el.__qclosepopup\n    }\n\n    el.__qclosepopup = ctx\n\n    el.addEventListener('click', ctx.handler)\n    el.addEventListener('keyup', ctx.handlerKey)\n  },\n\n  update (el, { value, oldValue }) {\n    if (el.__qclosepopup !== void 0 && value !== oldValue) {\n      el.__qclosepopup.depth = getDepth(value)\n    }\n  },\n\n  unbind (el) {\n    const ctx = el.__qclosepopup_old || el.__qclosepopup\n    if (ctx !== void 0) {\n      el.removeEventListener('click', ctx.handler)\n      el.removeEventListener('keyup', ctx.handlerKey)\n      delete el[el.__qclosepopup_old ? '__qclosepopup_old' : '__qclosepopup']\n    }\n  }\n}\n"]}]}